(function(t){function a(a){for(var s,n,o=a[0],l=a[1],c=a[2],d=0,u=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&u.push(i[n][0]),i[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);m&&m(a);while(u.length)u.shift()();return r.push.apply(r,c||[]),e()}function e(){for(var t,a=0;a<r.length;a++){for(var e=r[a],s=!0,o=1;o<e.length;o++){var l=e[o];0!==i[l]&&(s=!1)}s&&(r.splice(a--,1),t=n(n.s=e[0]))}return t}var s={},i={app:0},r=[];function n(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=t,n.c=s,n.d=function(t,a,e){n.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,a){if(1&a&&(t=n(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var s in t)n.d(e,s,function(a){return t[a]}.bind(null,s));return e},n.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(a,"a",a),a},n.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=a,o=o.slice();for(var c=0;c<o.length;c++)a(o[c]);var m=l;r.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"03cf":function(t,a,e){},"0700":function(t,a,e){},"56d7":function(t,a,e){"use strict";e.r(a);e("e260"),e("e6cf"),e("cca6"),e("a79d");var s=e("2b0e"),i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-main-wrapper",attrs:{id:"app"}},[e("loading",{attrs:{active:t.isLoading,"is-full-page":!0},on:{"update:active":function(a){t.isLoading=a}}}),t.isLoggedIn?e("span",[e("Navbar"),e("Sidebar"),e("div",{staticClass:"dashboard-wrapper"},[e("router-view"),e("Footer")],1)],1):e("span",[e("Login")],1)],1)},r=[],n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-header"},[e("nav",{staticClass:"navbar navbar-expand-lg bg-white fixed-top"},[e("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("PULS Admin")]),t._m(0),e("div",{staticClass:"collapse navbar-collapse ",attrs:{id:"navbarSupportedContent"}},[e("ul",{staticClass:"navbar-nav ml-auto navbar-right-top"},[e("li",{staticClass:"nav-item dropdown nav-user"},[t._m(1),e("div",{staticClass:"dropdown-menu dropdown-menu-right nav-user-dropdown",attrs:{"aria-labelledby":"navbarDropdownMenuLink2"}},[t._m(2),e("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"cog"}}),t._v("Réglages")],1),e("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.logout(a)}}},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"power-off"}}),t._v("Déconnexion")],1)])])])])],1)])},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{staticClass:"nav-link nav-user-img",attrs:{href:"#",id:"navbarDropdownMenuLink2","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("span",{staticClass:"user-avatar-md rounded-circle bg-primary d-flex align-items-center justify-content-center",staticStyle:{width:"40px",height:"40px"}},[t._v("A")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"nav-user-info"},[e("h5",{staticClass:"mb-0 text-white nav-user-name"},[t._v("Admin")])])}],l={name:"Navbar",computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn},isAdmin:function(){return this.$store.getters.isAdmin},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},isTerminalOn:function(){return this.$store.state.currentTerminal.is_on}},methods:{logout:function(){this.$store.dispatch("logout")}}},c=l,m=e("2877"),d=Object(m["a"])(c,n,o,!1,null,null,null),u=d.exports,p=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"footer"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[t._m(0),e("div",{staticClass:"col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"text-md-right footer-links d-none d-sm-block"},[e("router-link",{attrs:{to:"/home"}},[t._v("Accueil")])],1)])])])])},v=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12"},[t._v(" Copyright © 2020 PULS. All rights reserved. Theme by "),e("a",{attrs:{href:"https://colorlib.com/wp/"}},[t._v("Colorlib")]),t._v(". ")])}],g={name:"Footer"},h=g,f=Object(m["a"])(h,p,v,!1,null,null,null),b=f.exports,C=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"nav-left-sidebar sidebar-dark"},[e("div",{staticClass:"menu-list"},[e("nav",{staticClass:"navbar navbar-expand-lg navbar-light"},[e("a",{staticClass:"d-xl-none d-lg-none",attrs:{href:"#"}},[t._v("Dashboard")]),t._m(0),e("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNav"}},[e("ul",{staticClass:"navbar-nav flex-column"},[e("li",{staticClass:"nav-divider"},[t._v(" Menu ")]),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link first",attrs:{exact:"",to:"/"}},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"rocket"}}),t._v("Dashboard")],1)],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link first",attrs:{to:"/terminals",exact:"",event:"",href:"#","data-toggle":"collapse","aria-expanded":"false","data-target":"#submenu-terminals","aria-controls":"submenu-terminals"}},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"user"}}),t._v(" Terminaux")],1),e("div",{staticClass:"collapse submenu",attrs:{id:"submenu-terminals"}},[e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/terminals"}},[t._v("Tous les terminaux")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"addTerminal"}}},[t._v("Ajouter un terminal")])],1)])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link first",attrs:{to:"/campaigns",exact:"",event:"",href:"#","data-toggle":"collapse","aria-expanded":"false","data-target":"#submenu-campaigns","aria-controls":"submenu-campaigns"}},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"file"}}),t._v(" Campagnes")],1),e("div",{staticClass:"collapse submenu",attrs:{id:"submenu-campaigns"}},[e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/campaigns"}},[t._v("Toutes les campagnes")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"addCampaign"}}},[t._v("Ajouter une campagne")])],1)])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link first",attrs:{to:"/games",exact:"",event:"",href:"#","data-toggle":"collapse","aria-expanded":"false","data-target":"#submenu-games","aria-controls":"submenu-games"}},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"gamepad"}}),t._v(" Jeux")],1),e("div",{staticClass:"collapse submenu",attrs:{id:"submenu-games"}},[e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/games"}},[t._v("Tous les jeux")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"addGame"}}},[t._v("Ajouter un jeu")])],1)])])],1),e("li",{staticClass:"nav-divider"},[t._v(" Gestion ")]),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link first",attrs:{to:"/clients",exact:"",event:"",href:"#","data-toggle":"collapse","aria-expanded":"false","data-target":"#submenu-clients","aria-controls":"submenu-clients"}},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"columns"}}),t._v(" Clients")],1),e("div",{staticClass:"collapse submenu",attrs:{id:"submenu-clients"}},[e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/clients"}},[t._v("Tous les clients")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"addClient"}}},[t._v("Ajouter un client")])],1)])])],1)])])])])])},_=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}],x={name:"Sidebar"},y=x,w=Object(m["a"])(y,C,_,!1,null,null,null),k=w.exports,$=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"splash-container"},[e("div",{staticClass:"card "},[t._m(0),t.errors.visible?e("div",{staticClass:"card-body border-bottom"},[t.errors.visible?e("Alert",{attrs:{type:t.errors.type,message:t.errors.message},on:{dismiss:function(a){t.errors.visible=!1}}}):t._e()],1):t._e(),e("div",{staticClass:"card-body"},[e("form",[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.username,expression:"credentials.username"}],staticClass:"form-control form-control-lg",attrs:{id:"username",type:"text",placeholder:"Username"},domProps:{value:t.credentials.username},on:{input:function(a){a.target.composing||t.$set(t.credentials,"username",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],staticClass:"form-control form-control-lg",attrs:{id:"password",type:"password",placeholder:"Password"},domProps:{value:t.credentials.password},on:{input:function(a){a.target.composing||t.$set(t.credentials,"password",a.target.value)}}})]),e("button",{staticClass:"btn btn-primary btn-lg btn-block",attrs:{type:"submit"},on:{click:function(a){return a.preventDefault(),t.login(a)}}},[t._v(" Se connecter ")])])])])])},j=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-header text-center"},[e("h3",[t._v("PULS Admin")]),e("span",{staticClass:"splash-description"},[t._v("Veuillez entrer vos informations de connexion.")])])}],A={name:"Login",data:function(){return{credentials:{username:"",password:""},loading:!1,errors:{visible:!1,type:"danger",message:""}}},methods:{login:function(){var t=this;this.loading=!0,this.$store.dispatch("login",this.credentials).then((function(){return t.$router.push("/")})).catch((function(a){t.loading=!1,t.errors={visible:!0,type:"danger",message:a.response.data["non_field_errors"][0]}}))}}},E=A,T=(e("91a9"),Object(m["a"])(E,$,j,!1,null,"43b1c130",null)),P=T.exports,D=e("9062"),S=e.n(D),N=(e("e40d"),{name:"App",components:{Navbar:u,Footer:b,Sidebar:k,Login:P,Loading:S.a},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn},isLoading:function(){return this.$store.getters.loading}},mounted:function(){}}),O=N,I=Object(m["a"])(O,i,r,!1,null,null,null),L=I.exports,q=(e("b0c0"),e("8c4f")),z=(e("b64b"),e("d3b7"),e("2f62")),G=e("bc3a"),F=e.n(G);s["a"].use(z["a"]);var U=new z["a"].Store({state:{status:"",errors:"",currentUser:JSON.parse(localStorage.getItem("userInfo"))||{},accessToken:localStorage.getItem("accessToken")||"",refreshToken:localStorage.getItem("refreshToken")||"",maxGames:3,maxCampaigns:3},mutations:{SET_BEARER:function(t,a){F.a.defaults.headers.common["Authorization"]="Bearer ".concat(a)},SET_TOKENS:function(t,a){t.accessToken=a.access,t.refreshToken=a.refresh},UPDATE_USER_INFO:function(t,a){for(var e=JSON.parse(localStorage.getItem("userInfo"))||t.currentUser,s=0,i=Object.keys(a);s<i.length;s++){var r=i[s];null!=a[r]&&(t.currentUser[r]=a[r],e[r]=a[r])}localStorage.setItem("userInfo",JSON.stringify(e))},DELETE_USER_INFO:function(t){t.currentUser={},t.refreshToken="",t.accessToken="",localStorage.removeItem("userInfo")}},actions:{login:function(t,a){var e=t.commit;return new Promise((function(t,s){jwt.login(a.username,a.password).then((function(a){localStorage.setItem("accessToken",a.data.access),localStorage.setItem("refreshToken",a.data.refresh),e("SET_TOKENS",a.data),e("SET_BEARER",a.data.access),jwt.getUserInfo().then((function(s){e("UPDATE_USER_INFO",s.data),router.push(router.currentRoute.query.to||"/"),t(a)})).catch((function(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),s({message:"Impossible d'accéder à ce compte. Il a peut-être expiré ou a été désactivé."})}))})).catch((function(t){console.error(t.response),s({message:"Impossible de se connecter avec ces identifiants. Veuillez réessayer."})}))}))},refreshAccessToken:function(t,a){var e=t.commit;localStorage.setItem("accessToken",a.access),e("SET_BEARER",a.access),jwt.getUserInfo().then((function(t){e("UPDATE_USER_INFO",t.data)}))},logout:function(t){var a=t.commit;return new Promise((function(t,e){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),a("DELETE_USER_INFO"),router.push("/login"),t({message:"Vous êtes désormais déconnecté."})}))}},getters:{isLoggedIn:function(t){return""!=t.refreshToken},isStaff:function(t){return!(""==t.refreshToken||!t.currentUser.is_staff||t.currentUser.is_superuser)},isAdmin:function(t){return""!=t.refreshToken&&t.currentUser.is_superuser}},modules:{}}),H=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-ecommerce"},[e("div",{staticClass:"container-fluid dashboard-content "},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"page-header"},[e("h2",{staticClass:"pageheader-title"},[t._v("Dashboard")]),e("div",{staticClass:"page-breadcrumb"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb d-flex align-items-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/"}},[t._v("Dashboard")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" Général ")])],1)])])])])]),e("div",{staticClass:"ecommerce-widget"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"text-muted"},[t._v("Collecté ce mois")]),e("div",{staticClass:"metric-value d-inline-block"},[t.collected>0?e("h1",{staticClass:"mb-1"},[t._v(t._s(t.collected)+" €")]):e("h1",{staticClass:"mb-1"},[t._v("0 €")])]),t.collected_last>0?e("div",{staticClass:"metric-label d-inline-block float-right text-success font-weight-bold"},[e("span",[e("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"arrow-up"}})],1),e("span",[t._v("+"+t._s(100*t.collected_last)+" %")])]):t.collected_last<0?e("div",{staticClass:"metric-label d-inline-block float-right text-danger font-weight-bold"},[e("span",[e("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"arrow-down"}})],1),e("span",[t._v(t._s(100*t.collected_last)+" %")])]):e("div",{staticClass:"metric-label d-inline-block float-right text-warning font-weight-bold"},[e("span",[t._v("+"+t._s(t.collected_last)+" %")])])])])]),e("div",{staticClass:"col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"text-muted"},[t._v("Nombre de donateurs")]),e("div",{staticClass:"metric-value d-inline-block"},[e("h1",{staticClass:"mb-1"},[t._v(t._s(t.nb_donators))])]),t.nb_donators_last>0?e("div",{staticClass:"metric-label d-inline-block float-right text-success font-weight-bold"},[e("span",[e("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"arrow-up"}})],1),e("span",[t._v("+"+t._s(100*t.nb_donators_last)+" %")])]):t.nb_donators_last<0?e("div",{staticClass:"metric-label d-inline-block float-right text-danger font-weight-bold"},[e("span",[e("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"arrow-down"}})],1),e("span",[t._v(t._s(100*t.nb_donators_last)+" %")])]):e("div",{staticClass:"metric-label d-inline-block float-right text-warning font-weight-bold"},[e("span",[t._v("+"+t._s(t.nb_donators_last)+" %")])])])])]),e("div",{staticClass:"col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"text-muted"},[t._v("Nombre de terminaux")]),e("div",{staticClass:"metric-value d-inline-block"},[e("h1",{staticClass:"mb-1"},[t._v(t._s(t.nb_terminals))])])])])]),e("div",{staticClass:"col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"text-muted"},[t._v("Temps total de jeu")]),e("div",{staticClass:"metric-value d-inline-block"},[e("h1",{staticClass:"mb-1"},[t._v(t._s(t.total_gamesession))])])])])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-9 col-lg-12 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("h5",{staticClass:"card-header"},[t._v("Terminaux allumés")]),e("div",{staticClass:"card-body p-0"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[t._m(0),t.terminals.length>0?e("tbody",t._l(t.terminals,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(s+1))]),e("td",[a.is_playing?e("span",{staticClass:"text-success"},[t._v("En jeu")]):e("span",{staticClass:"text-warning"},[t._v("Allumé")])]),e("td",[t._v(t._s(a.name))]),e("td",[e("router-link",{attrs:{to:"/clients"}},[t._v(t._s(a.owner.customer.company))])],1),e("td",t._l(a.campaigns,(function(a,s){return e("span",{key:s,staticClass:"border border-primary p-1 small rounded mr-1"},[e("router-link",{attrs:{to:"/campaigns/"+a.id}},[t._v(t._s(a.name))])],1)})),0),a.total_donations?e("td",[t._v(" "+t._s(a.total_donations)+" € ")]):e("td",[t._v("0 €")])])})),0):e("tbody",[t._m(1)])])])])])])])])])])},M=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"bg-light"},[e("tr",{staticClass:"border-0"},[e("th",{staticClass:"border-0"},[t._v("#")]),e("th",{staticClass:"border-0"},[t._v("Status")]),e("th",{staticClass:"border-0"},[t._v("Nom")]),e("th",{staticClass:"border-0"},[t._v("Client")]),e("th",{staticClass:"border-0"},[t._v("Campagnes")]),e("th",{staticClass:"border-0"},[t._v("Total dons")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("tr",[e("td",{staticClass:"text-center",attrs:{colspan:"6"}},[t._v(" Aucun terminal allumé pour le moment. ")])])}],J={name:"Home",data:function(){return{terminals:{},collected:0,nb_donators:0,nb_terminals:0,total_gamesession:0,collected_last:0,nb_donators_last:0}},mounted:function(){this.getStats()},methods:{getStats:function(){var t=this;this.$http.get("dashboard/").then((function(a){t.terminals=a.data.terminals,t.collected=a.data.collected,t.nb_donators=a.data.nb_donators,t.nb_terminals=a.data.nb_terminals,t.total_gamesession=a.data.total_gamesession,0==a.data.collected_last|!a.data.collected_last?t.collected_last=0:t.collected_last=(a.data.collected-a.data.collected_last)/a.data.collected_last,0==a.data.nb_donators_last|!a.data.nb_donators_last?t.nb_donators=0:t.nb_donators_last=(a.data.nb_donators-a.data.nb_donators_last)/a.data.nb_donators_last})).catch((function(){t.errors={visible:!0,type:"danger",message:"Impossible de récupérer les statistiques, contactez le webmaster."}}))}}},V=J,R=Object(m["a"])(V,H,M,!1,null,null,null),B=R.exports,W=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-ecommerce"},[e("div",{staticClass:"container-fluid dashboard-content "},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"page-header"},[e("div",{staticClass:"d-flex justify-content-between"},[e("h2",{staticClass:"pageheader-title"},[t._v("Terminaux")]),e("router-link",{staticClass:"btn btn-primary mb-1",attrs:{to:{name:"addTerminal"}}},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"plus"}}),t._v("Ajouter un terminal")],1)],1),e("div",{staticClass:"page-breadcrumb"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb d-flex align-items-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/home"}},[t._v("Dashboard")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/terminals"}},[t._v("Terminaux")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" Tous les terminaux ")])],1)])])])])]),t.errors.visible?e("Alert",{attrs:{type:t.errors.type,message:t.errors.message},on:{dismiss:function(a){t.errors.visible=!1}}}):t._e(),e("div",{staticClass:"ecommerce-widget"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("h5",{staticClass:"card-header"},[t._v("Terminaux")]),e("div",{staticClass:"card-body p-0"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.terminals,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.id))]),e("td",[a.is_active?e("span",{staticClass:"text-success"},[t._v("Activé")]):e("span",{staticClass:"text-danger"},[t._v("Désactivé")])]),e("td",[a.is_on&a.is_playing?e("span",[e("span",{staticClass:"badge-dot badge-success mr-1"}),t._v("En jeu")]):t._e(),a.is_on&!a.is_playing?e("span",[e("span",{staticClass:"badge-dot badge-warning mr-1"}),t._v("Allumé")]):e("span",[e("span",{staticClass:"badge-dot badge-danger mr-1"}),t._v("Eteint")])]),e("td",[t._v(t._s(a.name))]),e("td",[e("router-link",{attrs:{to:"/clients"}},[t._v(t._s(a.owner.customer.company))])],1),e("td",t._l(a.campaigns,(function(a,s){return e("span",{key:s,staticClass:"border border-primary p-1 small rounded mr-1"},[e("router-link",{attrs:{to:"/campaigns/"+a.id}},[t._v(t._s(a.name))])],1)})),0),a.total_donations?e("td",[t._v(" "+t._s(a.total_donations)+" € ")]):e("td",[t._v("0 €")]),e("td",[e("router-link",{staticClass:"text-dark",attrs:{to:"/terminals/"+a.id}},[e("font-awesome-icon",{attrs:{icon:"eye"}})],1)],1),e("td",[a.is_active?e("a",{staticClass:"text-success",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.deactivateTerminal(s)}}},[e("font-awesome-icon",{attrs:{icon:"power-off"}})],1):e("a",{staticClass:"text-danger",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.activateTerminal(s)}}},[e("font-awesome-icon",{attrs:{icon:"power-off"}})],1)]),e("td",[e("router-link",{staticClass:"text-primary",attrs:{to:"/terminal/"+a.id+"/edit"}},[e("font-awesome-icon",{attrs:{icon:"pen"}})],1)],1),e("td",[e("router-link",{staticClass:"text-danger",attrs:{to:"/"}},[e("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1)],1)])})),0)])])])])])])])],1)])},K=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"bg-light"},[e("tr",{staticClass:"border-0"},[e("th",{staticClass:"border-0"},[t._v("#")]),e("th",{staticClass:"border-0"},[t._v("Actif")]),e("th",{staticClass:"border-0"},[t._v("Status")]),e("th",{staticClass:"border-0"},[t._v("Nom")]),e("th",{staticClass:"border-0"},[t._v("Client")]),e("th",{staticClass:"border-0"},[t._v("Campagnes")]),e("th",{staticClass:"border-0"},[t._v("Total dons")]),e("th",{staticClass:"border-0"}),e("th",{staticClass:"border-0"}),e("th",{staticClass:"border-0"}),e("th",{staticClass:"border-0"})])])}],Y={name:"AllTerminals",data:function(){return{terminals:{},errors:{visible:!1,type:"danger",message:""}}},mounted:function(){this.getTerminals()},methods:{getTerminals:function(){var t=this;this.$http.get("terminal/").then((function(a){t.terminals=a.data})).catch((function(){t.errors={visible:!0,type:"danger",message:"Impossible de récupérer la liste des terminaux. Vérifier que le serveur est opérationnelle."}}))},activateTerminal:function(t){var a=this;this.terminals[t].campaigns.length>0&&this.terminals[t].games.length>0?this.$http.get("terminal/"+this.terminals[t].id+"/activate/").then((function(e){a.$set(a.terminals[t],"is_active",e.data.is_active)})).catch((function(){a.errors={visible:!0,type:"danger",message:"Impossible de d'activer le terminal."}})):this.errors={visible:!0,type:"danger",message:"Impossible d'activer un terminal sans campagne ou sans jeu."}},deactivateTerminal:function(t){var a=this;this.$http.get("terminal/"+this.terminals[t].id+"/deactivate/").then((function(e){a.$set(a.terminals[t],"is_active",e.data.is_active)})).catch((function(){a.errors={visible:!0,type:"danger",message:"Impossible de désactiver le terminal."}}))}}},Q=Y,X=Object(m["a"])(Q,W,K,!1,null,null,null),Z=X.exports,tt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-ecommerce"},[e("div",{staticClass:"container-fluid dashboard-content "},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"page-header"},[e("h2",{staticClass:"pageheader-title"},[t._v("Terminaux")]),e("div",{staticClass:"page-breadcrumb"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb d-flex align-items-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/"}},[t._v("Dashboard")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/terminals"}},[t._v("Terminaux")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" "+t._s(t.terminal.name)+" ")])],1)])])])])]),t.errors.visible?e("Alert",{attrs:{type:t.errors.type,message:t.errors.message},on:{dismiss:function(a){t.errors.visible=!1}}}):t._e(),t.terminal.name?e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-3 col-md-5 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[t._m(0),e("div",{staticClass:"text-center"},[e("h2",{staticClass:"font-24 mb-0"},[t._v(t._s(t.terminal.name))]),e("p",[t._v(" "+t._s(t.terminal.owner.customer.company)+" "),e("span",{staticClass:"mx-2"},[t._v("|")]),t.terminal.is_active?e("span",{staticClass:"text-success"},[t._v("Activé")]):e("span",{staticClass:"text-danger"},[t._v("Désactivé")])])]),e("div",{staticClass:"d-flex align-items-center justify-content-center mt-2"},[t.terminal.is_on?e("span",{staticClass:"badge badge-success mr-2"},[t._v("Allumé")]):e("span",{staticClass:"badge badge-danger mr-2"},[t._v("Eteint")]),t.terminal.is_playing?e("span",{staticClass:"badge badge-warning mr-2"},[t._v("En jeu")]):t._e()])]),e("div",{staticClass:"card-body border-top"},[e("h3",{staticClass:"font-16"},[t._v("Informations de contact")]),e("div",{},[e("ul",{staticClass:"list-unstyled mb-0"},[e("li",{staticClass:"mb-2"},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"envelope"}}),t._v(t._s(t.terminal.owner.customer.representative)+" ")],1),e("li",{staticClass:"mb-0"},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"map-pin"}}),t._v(t._s(t.terminal.location)+" ")],1)])])]),e("div",{staticClass:"card-body border-top"},[e("h3",{staticClass:"font-16"},[t._v("Campagnes")]),e("div",{},[e("ul",{staticClass:"mb-0 list-unstyled"},t._l(t.terminal.campaigns,(function(a,s){return e("li",{key:s,staticClass:"mb-1 border border-primary rounded p-1 px-2 bg-light campaign-card"},[e("router-link",{attrs:{to:"/campaigns/"+a.id}},[e("img",{staticClass:"mr-2 campaign-logo-grayed",attrs:{src:a.logo,width:"20",alt:a.name}}),t._v(t._s(a.name))])],1)})),0)])]),e("div",{staticClass:"card-body border-top"},[e("h3",{staticClass:"font-16"},[t._v("Jeux")]),e("div",{},[e("ul",{staticClass:"mb-0 list-unstyled"},t._l(t.terminal.games,(function(a,s){return e("li",{key:s,staticClass:"mb-1 border border-primary rounded p-1 px-2 bg-light campaign-card"},[e("router-link",{attrs:{to:"/games/"+a.id}},[e("img",{staticClass:"mr-2 campaign-logo-grayed",attrs:{src:a.logo,width:"20",alt:a.name}}),t._v(t._s(a.name))])],1)})),0)])])])]),e("div",{staticClass:"col-xl-9 col-lg-9 col-md-7 col-sm-12 col-12"},[e("div",{staticClass:"influence-profile-content pills-regular"},[e("ul",{staticClass:"nav nav-pills mb-3 nav-justified",attrs:{id:"pills-tab",role:"tablist"}},[t._m(1),e("li",{staticClass:"nav-item"},[t.terminal.is_active?e("a",{staticClass:"nav-link text-danger",attrs:{href:"",id:"pills-packages-tab"},on:{click:function(a){return a.preventDefault(),t.deactivateTerminal(t.terminal.id)}}},[t._v("Désactiver")]):e("a",{staticClass:"nav-link text-success",attrs:{href:"",id:"pills-packages-tab"},on:{click:function(a){return a.preventDefault(),t.activateTerminal(t.terminal.id)}}},[t._v("Activer")])]),t._m(2)]),e("div",{staticClass:"tab-content",attrs:{id:"pills-tabContent"}},[e("div",{staticClass:"tab-pane fade show active",attrs:{id:"pills-stats",role:"tabpanel","aria-labelledby":"pills-stats-tab"}},[e("div",{staticClass:"row"},[t._m(3),e("div",{staticClass:"col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("h1",{staticClass:"mb-1"},[t._v(t._s(t.terminal.total_donations)+" €")]),e("p",[t._v("Totals dons")])])])]),e("div",{staticClass:"col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[t.terminal.avg_donation?e("h1",{staticClass:"mb-1"},[t._v(" "+t._s(t.terminal.avg_donation.toFixed(2))+" € ")]):e("h1",{staticClass:"mb-1"},[t._v(" 0 € ")]),e("p",[t._v("Don moyen")])])])]),e("div",{staticClass:"col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[t.terminal.avg_timesession?e("h1",{staticClass:"mb-1"},[t._v(" "+t._s(t.terminal.avg_timesession)+" ")]):e("h1",{staticClass:"mb-1"},[t._v("00:00:00")]),e("p",[t._v("Session moyenne")])])])]),e("div",{staticClass:"col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[t.terminal.avg_gametimesession?e("h1",{staticClass:"mb-1"},[t._v(" "+t._s(t.terminal.avg_gametimesession)+" ")]):e("h1",{staticClass:"mb-1"},[t._v("00:00:00")]),e("p",[t._v("Temps de jeu moyen")])])])])]),t._m(4),e("div",{staticClass:"card"},[e("h5",{staticClass:"card-header"},[t._v("Dons")]),e("div",{staticClass:"card-body p-0"},[e("div",{staticClass:"dataTables_wrapper dt-bootstrap4"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[t._m(5),e("tbody",t._l(t.displayedPayments,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.id))]),e("td",["Accepted"==a.status?e("span",{staticClass:"text-success"},[t._v(t._s(a.status))]):e("span",{staticClass:"text-danger"},[t._v(t._s(a.status))])]),e("td",[t._v("N° "+t._s(a.donator.id))]),e("td",[e("router-link",{attrs:{to:"/"}},[e("img",{staticClass:"mr-2 campaign-logo-grayed",attrs:{src:a.campaign.logo,width:"20",alt:a.campaign.name}}),t._v(t._s(a.campaign.name))])],1),e("td",[t._v(t._s(a.amount)+" €")]),e("td",[e("router-link",{attrs:{to:"/"}},[e("img",{staticClass:"mr-2 campaign-logo-grayed",attrs:{src:a.game.logo,width:"20",alt:a.game.name}}),t._v(t._s(a.game.name))])],1)])})),0)])]),e("div",{staticClass:"d-flex align-items-center justify-content-between my-2"},[e("div",{staticClass:"col-sm-12 col-md-5"},[e("div",{staticClass:"dataTables_info",attrs:{id:"DataTables_Table_0_info",role:"status","aria-live":"polite"}},[t._v(" Afficher 1 à "+t._s(t.perPage)+" de "+t._s(t.allPayments.length)+" entrées ")])]),e("div",{staticClass:"col-sm-12 col-md-7 d-flex justify-content-end"},[e("nav",{staticClass:"w-100",attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination w-100  d-flex justify-content-end"},[e("li",{staticClass:"page-item"},[1!=t.page?e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.page--}}},[t._v("Previous")]):t._e()]),t._l(t.pages.slice(t.page-1,t.page+5),(function(a){return e("li",{key:a,staticClass:"page-item"},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.page=a}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item"},[t.page<t.pages.length?e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.page++}}},[t._v("Next")]):t._e()])],2)])])])])])])])])])])]):t._e()],1)])},at=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"user-avatar text-center d-block"},[s("img",{attrs:{src:e("7ca3"),alt:"User Avatar",height:"100"}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link active",attrs:{id:"pills-stats-tab","data-toggle":"pill",href:"#pills-stats",role:"tab","aria-controls":"pills-stats","aria-selected":"true"}},[t._v("Statistiques")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link text-danger",attrs:{id:"pills-review-tab"}},[t._v("Supprimer")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"section-block"},[e("h3",{staticClass:"section-title"},[t._v("Statistiques générales")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"section-block"},[e("h3",{staticClass:"section-title"},[t._v("Derniers dons")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"bg-light"},[e("tr",{staticClass:"border-0"},[e("th",{staticClass:"border-0"},[t._v("#")]),e("th",{staticClass:"border-0"},[t._v("Status")]),e("th",{staticClass:"border-0"},[t._v("Donateur")]),e("th",{staticClass:"border-0"},[t._v("Campagne")]),e("th",{staticClass:"border-0"},[t._v("Montant")]),e("th",{staticClass:"border-0"},[t._v("Jeu")])])])}],et=(e("fb6a"),e("5319"),{name:"ShowTerminal",data:function(){return{terminal:{owner:{customer:{company:""}},payments:[]},errors:{visible:!1,type:"danger",message:""},page:1,perPage:9,pages:[]}},mounted:function(){this.getTerminal()},watch:{allPayments:function(){this.setPages()}},computed:{allPayments:function(){return this.terminal.payments},displayedPayments:function(){return this.paginate(this.allPayments)}},methods:{getTerminal:function(){var t=this;this.$http.get("terminal/"+this.$route.params.id+"/").then((function(a){t.terminal=a.data,t.terminal.avg_donation=a.data.avg_donation,t.terminal.avg_gametimesession=a.data.avg_gametimesession.replace(/"/g,""),t.terminal.avg_timesession=a.data.avg_timesession.replace(/"/g,"")})).catch((function(a){t.errors={visible:!0,type:"danger",message:a}}))},setPages:function(){for(var t=Math.ceil(this.allPayments.length/this.perPage),a=1;a<=t;a++)this.pages.push(a)},paginate:function(t){var a=this.page,e=this.perPage,s=a*e-e,i=a*e;return t.slice(s,i)},activateTerminal:function(t){var a=this;this.terminal.campaigns.length>0&&this.terminal.games.length>0?this.$http.get("terminal/"+t+"/activate/").then((function(t){a.$set(a.terminal,"is_active",t.data.is_active)})).catch((function(){a.errors={visible:!0,type:"danger",message:"Impossible de d'activer le terminal."}})):this.errors={visible:!0,type:"danger",message:"Impossible d'activer un terminal sans campagne ou sans jeu."}},deactivateTerminal:function(t){var a=this;this.$http.get("terminal/"+t+"/deactivate/").then((function(t){a.$set(a.terminal,"is_active",t.data.is_active)})).catch((function(){a.errors={visible:!0,type:"danger",message:"Impossible de désactiver le terminal."}}))}}}),st=et,it=Object(m["a"])(st,tt,at,!1,null,null,null),rt=it.exports,nt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-ecommerce"},[e("div",{staticClass:"container-fluid dashboard-content "},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"page-header"},[t._m(0),e("div",{staticClass:"page-breadcrumb"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb d-flex align-items-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/home"}},[t._v("Dashboard")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/terminals"}},[t._v("Terminaux")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" Ajouter un terminal ")])],1)])])])])]),t.errors.visible?e("Alert",{attrs:{type:t.errors.type,message:t.errors.message},on:{dismiss:function(a){t.errors.visible=!1}}}):t._e(),t.formVisible?e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header d-flex align-items-center justify-content-between"},[e("h5",{staticClass:"mb-0"},[t._v("Ajouter un terminal")]),e("a",{staticClass:"btn btn-dark",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.goBack(a)}}},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"undo"}}),t._v("Choisir un autre client")],1)]),e("div",{staticClass:"card-body"},[t.choosenCustomer.company?e("h4",{staticClass:"mb-0"},[t._v("Client choisi")]):e("h4",{staticClass:"mb-0"},[t._v("Nouveau client")]),e("p",[t._v("Le compte lié au nouveau terminal.")]),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{staticClass:"col-form-label",attrs:{for:"company"}},[t._v("Nom de l'entreprise")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.company,expression:"customer.company"}],staticClass:"form-control",attrs:{disabled:t.choosenCustomer.company,type:"text"},domProps:{value:t.customer.company},on:{input:function(a){a.target.composing||t.$set(t.customer,"company",a.target.value)}}})]),e("div",{staticClass:"form-group col"},[e("label",{staticClass:"col-form-label",attrs:{for:"inputEmail"}},[t._v("Contact au sein de l'entreprise")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.representative,expression:"customer.representative"}],staticClass:"form-control",attrs:{type:"email",placeholder:"name@example.com",disabled:t.choosenCustomer.representative},domProps:{value:t.customer.representative},on:{input:function(a){a.target.composing||t.$set(t.customer,"representative",a.target.value)}}})])]),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-md-6 col-12"},[e("label",{attrs:{for:"sales_type"}},[t._v("Type de vente")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.customer.sales_type,expression:"customer.sales_type"}],staticClass:"custom-select",attrs:{disabled:t.choosenCustomer.sales_type},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.customer,"sales_type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"A",checked:"A"==t.customer.sales_type}},[t._v("Achat")]),e("option",{attrs:{value:"L",checked:"L"==t.customer.sales_type}},[t._v("Location")])])]),e("div",{staticClass:"form-group col-md-6 col-12"},[e("label",{attrs:{for:"sales_type"}},[t._v("Contrat de maintenance")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.customer.maintenance_type,expression:"customer.maintenance_type"}],staticClass:"custom-select",attrs:{disabled:t.choosenCustomer.maintenance_type},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.customer,"maintenance_type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"option1",checked:"option1"==t.customer.sales_type}},[t._v("Option 1")]),e("option",{attrs:{value:"option2",checked:"option2"==t.customer.sales_type}},[t._v("Option 2")])])])])])]),e("div",{staticClass:"card-body border-top"},[e("h4",{staticClass:"mb-0"},[t._v("Paramètres de connexion")]),e("p",[t._v(" Ces identifiants doivent être sauvegardés quelque part. Vous ne pourrez pas les retrouver. ")]),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{staticClass:"col-form-label",attrs:{for:"company"}},[t._v("Utilisateur")]),e("div",{staticClass:"input-group input-group-sm mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("font-awesome-icon",{attrs:{icon:"user"}})],1)]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.username},on:{input:function(a){a.target.composing||t.$set(t.user,"username",a.target.value)}}})])]),e("div",{staticClass:"form-group col"},[e("label",{staticClass:"col-form-label",attrs:{for:"company"}},[t._v("Mot de passe")]),e("div",{staticClass:"input-group input-group-sm mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("font-awesome-icon",{attrs:{icon:"lock"}})],1)]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.user.password},on:{input:function(a){a.target.composing||t.$set(t.user,"password",a.target.value)}}})])])])])]),e("div",{staticClass:"card-body border-top"},[e("h4",{staticClass:"mb-0"},[t._v("Paramètres du terminal")]),e("p",[t._v(" Différents paramètres permettant d'identifier clairement le terminal. ")]),e("form",[e("div",{staticClass:"form-group"},[e("label",{staticClass:"col-form-label",attrs:{for:"company"}},[t._v("Nom du terminal")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.terminal.name,expression:"terminal.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.terminal.name},on:{input:function(a){a.target.composing||t.$set(t.terminal,"name",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"col-form-label",attrs:{for:"company"}},[t._v("Localisation du terminal")]),e("div",{staticClass:"input-group input-group-sm mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("font-awesome-icon",{attrs:{icon:"map-pin"}})],1)]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.terminal.location,expression:"terminal.location"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.terminal.location},on:{input:function(a){a.target.composing||t.$set(t.terminal,"location",a.target.value)}}})])])])]),e("div",{staticClass:"card-body border-top"},[e("h4",{staticClass:"mb-0"},[t._v("Campagnes & jeux")]),e("p",[t._v(" Sélectionnez les campagnes et les jeux actifs sur ce terminal. ")]),e("form",[e("div",{staticClass:"row"},[t.campaigns?e("div",{staticClass:"col"},[e("label",{attrs:{for:"campaign"}},[t._v("Campagnes actives : "),e("span",{class:[t.terminal.campaigns.length>t.maxCampaigns||0==t.terminal.campaigns.length?"text-danger":"","font-weight-bold"]},[t._v("("+t._s(t.terminal.campaigns.length)+"/"+t._s(t.maxCampaigns)+")")])]),e("div",{staticClass:"row form-group"},t._l(t.campaigns,(function(a){return e("label",{key:a.id,class:[t.campaignExists(a.id)?"checked":"","card-checkbox","col-3","py-2","mx-2"],attrs:{for:a.id},on:{click:function(e){return e.preventDefault(),t.selectCampaign(a)}}},[e("input",{attrs:{type:"radio"},domProps:{value:a.id}}),e("span",{class:["selected","d-flex","align-items-center","justify-content-center"]},[e("font-awesome-icon",{attrs:{icon:"check"}})],1),e("span",{staticClass:"checkbox-icon"},[e("img",{attrs:{src:a.logo,height:"70",alt:a.name}})]),e("h5",{staticClass:"mt-2"},[t._v(t._s(a.name))]),e("p",{staticClass:"lead"},[t._v(" "+t._s(a.collected)+"/"+t._s(a.goal_amount)+" € ")])])})),0)]):t._e()]),e("div",{staticClass:"row"},[t.games?e("div",{staticClass:"col"},[e("label",{attrs:{for:"game"}},[t._v("Jeux actifs : "),e("span",{class:[t.terminal.games.length>t.maxGames||0==t.terminal.games.length?"text-danger":"","font-weight-bold"]},[t._v("("+t._s(t.terminal.games.length)+"/"+t._s(t.maxGames)+")")])]),e("div",{staticClass:"row form-group"},t._l(t.games,(function(a){return e("label",{key:a.id,class:[t.gameExists(a.id)?"checked":"","card-checkbox","col-3","py-3","mx-2"],attrs:{for:a.id},on:{click:function(e){return e.preventDefault(),t.selectGame(a)}}},[e("input",{attrs:{type:"radio"},domProps:{value:a.id}}),e("span",{class:["selected","d-flex","align-items-center","justify-content-center"]},[e("font-awesome-icon",{attrs:{icon:"check"}})],1),e("span",{staticClass:"checkbox-icon"},[e("img",{attrs:{src:a.logo,height:"70",alt:a.name}})]),e("h4",{staticClass:"mt-2"},[t._v(t._s(a.name))])])})),0)]):t._e()])])]),e("div",{staticClass:"card-body text-center"},[e("button",{staticClass:"btn btn-success",on:{click:function(a){return a.preventDefault(),t.addTerminal(a)}}},[t._v(" Enregistrer le terminal ")])])])])]):e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("h5",{staticClass:"card-header"},[t._v("Ajouter un terminal")]),e("div",{staticClass:"card-body"},[e("h4",{staticClass:"mb-0"},[t._v("Choisir un client")]),e("p",{},[t._v(" Veuillez choisir à qui vous voulez attribuer ce nouveau terminal. Vous pouvez également créer un nouveau client. ")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.choosenCustomer,expression:"choosenCustomer"}],staticClass:"custom-select mb-2",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.choosenCustomer=a.target.multiple?e:e[0]}}},t._l(t.customers,(function(a){return e("option",{key:a.id,domProps:{value:a}},[t._v(t._s(a.company)+" - "+t._s(a.representative))])})),0),e("button",{staticClass:"btn btn-primary w-100",on:{click:function(a){return a.preventDefault(),t.continueWithCustomer(a)}}},[t._v(" Choisir un client existant ")]),t._m(1),e("button",{staticClass:"btn btn-success w-100",on:{click:function(a){return a.preventDefault(),t.continueWithoutCustomer(a)}}},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"plus"}}),t._v(" Créer un nouveau client ")],1)])])])])],1)])},ot=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex justify-content-between"},[e("h2",{staticClass:"pageheader-title"},[t._v("Terminaux")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"hr-text my-4 text-center"},[e("span",{staticClass:"lead"},[t._v("- ou -")])])}],lt={name:"AddTerminal",data:function(){return{choosenCustomer:{},customer:{},user:{},terminal:{campaigns:[],games:[]},formVisible:!1,customers:{},campaigns:{},games:{},maxGames:this.$store.state.maxGames,maxCampaigns:this.$store.state.maxCampaigns,errors:{visible:!1,type:"danger",message:""}}},mounted:function(){this.getCustomers(),this.getCampaigns(),this.getGames()},methods:{getCustomers:function(){var t=this;this.$http.get("customer/").then((function(a){t.customers=a.data})).catch((function(){t.errors={visible:!0,type:"danger",message:"Impossible de charger la liste des clients."}}))},getGames:function(){var t=this;this.$http.get("game/").then((function(a){t.games=a.data})).catch((function(){t.errors={visible:!0,type:"danger",message:"Impossible de charger la liste des jeux."}}))},getCampaigns:function(){var t=this;this.$http.get("campaign/").then((function(a){t.campaigns=a.data})).catch((function(){t.errors={visible:!0,type:"danger",message:"Impossible de charger la liste des campagnes."}}))},campaignExists:function(t){for(var a=0;a<this.terminal.campaigns.length;a++)if(this.terminal.campaigns[a]==t)return!0;return!1},selectCampaign:function(t){if(this.campaignExists(t.id))for(var a=0;a<this.terminal.campaigns.length;a++){var e=this.terminal.campaigns[a];e==t.id&&this.$delete(this.terminal.campaigns,a)}else this.terminal.campaigns.length<=this.maxCampaigns&&this.terminal.campaigns.push(t.id)},gameExists:function(t){for(var a=0;a<this.terminal.games.length;a++)if(this.terminal.games[a]==t)return!0;return!1},selectGame:function(t){if(this.gameExists(t.id))for(var a=0;a<this.terminal.games.length;a++){var e=this.terminal.games[a];e==t.id&&this.$delete(this.terminal.games,a)}else this.terminal.games.length<=this.maxGames&&this.terminal.games.push(t.id)},continueWithCustomer:function(){this.choosenCustomer&&(this.formVisible=!0,this.customer=this.choosenCustomer)},continueWithoutCustomer:function(){this.choosenCustomer="",this.customer={},this.formVisible=!0},goBack:function(){this.choosenCustomer="",this.customer={},this.formVisible=!1},addTerminal:function(){var t=this;this.choosenCustomer.id&&this.customer.id?(this.user.customer=this.customer.id,this.$http.post("user/",this.user).then((function(a){a?(t.user=a.data,t.terminal.owner=t.user.id,t.$http.post("terminal/",t.terminal).then((function(a){t.terminal=a.data,t.$router.push("/terminals")})).catch((function(){t.errors={visible:!0,type:"danger",message:"Erreur dans l'enregistrement du terminal."}}))):t.errors={visible:!0,type:"danger",message:"Impossible d'enregistrer cet utilisateur, vérifier l'username et le mot de passe."}})).catch((function(a){t.errors={visible:!0,type:"danger",message:a},console.log(a)}))):this.customer&&this.user&&this.terminal&&this.$http.post("customer/",this.customer).then((function(a){t.customer=a.data,t.user.customer=t.customer.id,t.$http.post("user/",t.user).then((function(a){t.user=a.data,t.terminal.owner=t.user.id,t.$http.post("terminal/",t.terminal).then((function(a){t.terminal=a.data,t.$router.push({name:"terminals"})})).catch((function(){t.errors={visible:!0,type:"danger",message:"Erreur dans l'enregistrement du terminal."}}))})).catch((function(){t.errors={visible:!0,type:"danger",message:"Erreur dans l'enregistrement de l'utilisateur."}}))})).catch((function(){t.errors={visible:!0,type:"danger",message:"Erreur dans l'enregistrement du client."}}))}}},ct=lt,mt=Object(m["a"])(ct,nt,ot,!1,null,null,null),dt=mt.exports,ut=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-ecommerce"},[e("div",{staticClass:"container-fluid dashboard-content "},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"page-header"},[t._m(0),e("div",{staticClass:"page-breadcrumb"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb d-flex align-items-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/home"}},[t._v("Dashboard")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/terminals"}},[t._v("Terminaux")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item",attrs:{"aria-current":"page"}},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/terminal/"+t.terminal.id}},[t._v(t._s(t.terminal.name))])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" Modifier ")])],1)])])])])]),t.errors.visible?e("Alert",{attrs:{type:t.errors.type,message:t.errors.message},on:{dismiss:function(a){t.errors.visible=!1}}}):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"card"},[t._m(1),t.terminal.owner?e("div",{staticClass:"card-body"},[e("h4",[t._v("Informations sur le terminal")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group w-100"},[e("label",{attrs:{for:"name"}},[t._v("Nom du terminal")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.terminal.name,expression:"terminal.name"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.terminal.name},on:{input:function(a){a.target.composing||t.$set(t.terminal,"name",a.target.value)}}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Donnez un nom cohérent au terminal.")])])]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group w-100"},[e("label",{attrs:{for:"owner"}},[t._v("Client")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.terminal.owner.customer.company,expression:"terminal.owner.customer.company"}],staticClass:"form-control",attrs:{type:"text",disabled:"","aria-describedby":"ownerHelp"},domProps:{value:t.terminal.owner.customer.company},on:{input:function(a){a.target.composing||t.$set(t.terminal.owner.customer,"company",a.target.value)}}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Le client rattaché au terminal.")])])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group w-100"},[e("label",{attrs:{for:"owner"}},[t._v("Username")]),e("div",{staticClass:"input-group input-group-sm mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("font-awesome-icon",{attrs:{icon:"user"}})],1)]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.terminal.owner.username,expression:"terminal.owner.username"}],staticClass:"form-control",attrs:{type:"text",disabled:"","aria-describedby":"ownerHelp"},domProps:{value:t.terminal.owner.username},on:{input:function(a){a.target.composing||t.$set(t.terminal.owner,"username",a.target.value)}}})]),e("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Le username attribué au terminal.")])])]),t._m(2)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"location"}},[t._v("Localisation")]),e("div",{staticClass:"input-group input-group-sm mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("font-awesome-icon",{attrs:{icon:"map-pin"}})],1)]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.terminal.location,expression:"terminal.location"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"helpId",placeholder:"Adresse ou coordonnées de la borne"},domProps:{value:t.terminal.location},on:{input:function(a){a.target.composing||t.$set(t.terminal,"location",a.target.value)}}})]),e("small",{staticClass:"form-text text-muted",attrs:{id:"helpId"}},[t._v("Localisation de la borne.")])])])])]):t._e(),e("div",{staticClass:"card-body border-top"},[e("h4",[t._v("Campagnes & jeux")]),e("div",{staticClass:"row"},[t.terminal.campaigns?e("div",{staticClass:"col"},[e("label",{attrs:{for:"campaign"}},[t._v("Campagnes actives : "),e("span",{class:[t.terminal.campaigns.length>t.maxCampaigns||0==t.terminal.campaigns.length?"text-danger":"","font-weight-bold"]},[t._v("("+t._s(t.terminal.campaigns.length)+"/"+t._s(t.maxCampaigns)+")")])]),e("div",{staticClass:"row form-group"},t._l(t.campaigns,(function(a){return e("label",{key:a.id,class:[t.campaignExists(a.id)?"checked":"","card-checkbox","col-3","py-2","mx-2"],attrs:{for:a.id},on:{click:function(e){return e.preventDefault(),t.selectCampaign(a)}}},[e("input",{attrs:{type:"radio"},domProps:{value:a.id}}),e("span",{class:["selected","d-flex","align-items-center","justify-content-center"]},[e("font-awesome-icon",{attrs:{icon:"check"}})],1),e("span",{staticClass:"checkbox-icon"},[e("img",{attrs:{src:a.logo,height:"70",alt:a.name}})]),e("h5",{staticClass:"mt-2"},[t._v(t._s(a.name))]),e("p",{staticClass:"lead"},[t._v(" "+t._s(a.collected)+"/"+t._s(a.goal_amount)+" € ")])])})),0)]):t._e()]),e("div",{staticClass:"row"},[t.terminal.games?e("div",{staticClass:"col"},[e("label",{attrs:{for:"game"}},[t._v("Jeux actifs : "),e("span",{class:[t.terminal.games.length>t.maxGames||0==t.terminal.games.length?"text-danger":"","font-weight-bold"]},[t._v("("+t._s(t.terminal.games.length)+"/"+t._s(t.maxGames)+")")])]),e("div",{staticClass:"row form-group"},t._l(t.games,(function(a){return e("label",{key:a.id,class:[t.gameExists(a.id)?"checked":"","card-checkbox","col-3","py-3","mx-2"],attrs:{for:a.id},on:{click:function(e){return e.preventDefault(),t.selectGame(a)}}},[e("input",{attrs:{type:"radio"},domProps:{value:a.id}}),e("span",{class:["selected","d-flex","align-items-center","justify-content-center"]},[e("font-awesome-icon",{attrs:{icon:"check"}})],1),e("span",{staticClass:"checkbox-icon"},[e("img",{attrs:{src:a.logo,height:"70",alt:a.name}})]),e("h4",{staticClass:"mt-2"},[t._v(t._s(a.name))])])})),0)]):t._e()])]),e("div",{staticClass:"card-body text-center"},[e("button",{staticClass:"btn btn-success",on:{click:function(a){return a.preventDefault(),t.edit(a)}}},[t._v(" Modifier le terminal ")])])])])])],1)])},pt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex justify-content-between"},[e("h2",{staticClass:"pageheader-title"},[t._v("Terminaux")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-header d-flex align-items-center justify-content-between"},[e("h5",{staticClass:"mb-0"},[t._v("Ajouter un terminal")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group w-100"},[e("label",{attrs:{for:"owner"}},[t._v("Password")]),e("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Par définition, il n'est pas possible de changer ou de retrouver le mot de passe. En cas de problèmes, il faut recréer un terminal. ")])])])}],vt=(e("a4d3"),e("4de4"),e("e439"),e("dbb4"),e("159b"),e("ade3"));function gt(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,s)}return e}function ht(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?gt(Object(e),!0).forEach((function(a){Object(vt["a"])(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):gt(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var ft={name:"EditTerminal",data:function(){return{terminal:"",campaigns:{},games:{},user:{},customer:{},maxGames:this.$store.state.maxGames,maxCampaigns:this.$store.state.maxCampaigns,errors:{visible:!1,type:"danger",message:""}}},mounted:function(){this.getTerminal(),this.getCampaigns(),this.getGames()},methods:{getGames:function(){var t=this;this.$http.get("game/").then((function(a){t.games=a.data})).catch((function(t){console.log(t.response)}))},getCampaigns:function(){var t=this;this.$http.get("campaign/").then((function(a){t.campaigns=a.data})).catch((function(t){console.log(t.response)}))},getTerminal:function(){var t=this;this.$http.get("terminal/"+this.$route.params.id+"/").then((function(a){t.terminal=a.data})).catch((function(t){console.log(t.response)}))},campaignExists:function(t){for(var a=0;a<this.terminal.campaigns.length;a++)if(this.terminal.campaigns[a].id==t)return!0;return!1},selectCampaign:function(t){if(this.campaignExists(t.id))for(var a=0;a<this.terminal.campaigns.length;a++){var e=this.terminal.campaigns[a];e.id==t.id&&this.$delete(this.terminal.campaigns,a)}else this.terminal.campaigns.length<=this.maxCampaigns&&this.terminal.campaigns.push(t)},gameExists:function(t){for(var a=0;a<this.terminal.games.length;a++)if(this.terminal.games[a].id==t)return!0;return!1},selectGame:function(t){if(this.gameExists(t.id))for(var a=0;a<this.terminal.games.length;a++){var e=this.terminal.games[a];e.id==t.id&&this.$delete(this.terminal.games,a)}else this.terminal.games.length<=this.maxGames&&this.terminal.games.push(t)},edit:function(){var t=this;if(this.terminal){var a=ht({},this.terminal);delete a.payments,delete a.avg_gametimesession,delete a.avg_timesession,delete a.avg_donation,delete a.total_donations,a.owner=a.owner.id;for(var e=[],s=0;s<a.games.length;s++){var i=a.games[s].id;e.push(i)}a.games=e;for(var r=[],n=0;n<a.campaigns.length;n++){var o=a.campaigns[n].id;r.push(o)}a.campaigns=r,this.$http.put("terminal/"+a.id+"/",a).then((function(){t.getTerminal(),t.errors={visible:!0,type:"success",message:"Modification réussie."}})).catch((function(a){t.errors={visible:!0,type:"danger",message:a}}))}}}},bt=ft,Ct=Object(m["a"])(bt,ut,pt,!1,null,null,null),_t=Ct.exports,xt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-ecommerce"},[e("div",{staticClass:"container-fluid dashboard-content "},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"page-header"},[e("div",{staticClass:"d-flex justify-content-between"},[e("h2",{staticClass:"pageheader-title"},[t._v("Campagnes")]),e("router-link",{staticClass:"btn btn-primary mb-1",attrs:{to:{name:"addCampaign"}}},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"plus"}}),t._v("Ajouter une campagne")],1)],1),e("div",{staticClass:"page-breadcrumb"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb d-flex align-items-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/home"}},[t._v("Dashboard")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/campaigns"}},[t._v("Campagnes")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" Toutes les campagnes ")])],1)])])])])]),t.errors.visible?e("Alert",{attrs:{type:t.errors.type,message:t.errors.message},on:{dismiss:function(a){t.errors.visible=!1}}}):t._e(),e("div",{staticClass:"ecommerce-widget"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("h5",{staticClass:"card-header"},[t._v("Campagnes")]),e("div",{staticClass:"card-body p-0"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.campaigns,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.id))]),e("td",[e("span",{staticClass:"text-success"},[e("img",{attrs:{src:a.logo,height:"30",alt:a.name}})])]),e("td",[t._v(" "+t._s(a.name)+" ")]),e("td",[t._v(t._s(t.stripCharacters(a.description)))]),e("td",[t._v(" "+t._s(a.collected)+"/"+t._s(a.goal_amount)+" € ")]),e("td",[t._v(" "+t._s(a.nb_terminals)+" termina"),a.nb_terminals>1?e("span",[t._v("ux")]):e("span",[t._v("l")])]),e("td",[e("router-link",{staticClass:"text-dark",attrs:{to:"/campaigns/"+a.id}},[e("font-awesome-icon",{attrs:{icon:"eye"}})],1)],1),e("td",[e("router-link",{staticClass:"text-primary",attrs:{to:"/campaign/"+a.id+"/edit"}},[e("font-awesome-icon",{attrs:{icon:"pen"}})],1)],1),e("td",[e("a",{staticClass:"text-danger",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.deleteCampaign(a.id)}}},[e("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1)])])})),0)])])])])])])])],1)])},yt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"bg-light"},[e("tr",{staticClass:"border-0"},[e("th",{staticClass:"border-0"},[t._v("#")]),e("th",{staticClass:"border-0"},[t._v("Logo")]),e("th",{staticClass:"border-0"},[t._v("Nom")]),e("th",{staticClass:"border-0"},[t._v("Description")]),e("th",{staticClass:"border-0"},[t._v("Dons collectés")]),e("th",{staticClass:"border-0"},[t._v("Terminaux associés")]),e("th",{staticClass:"border-0"}),e("th",{staticClass:"border-0"})])])}],wt={name:"AllCampaigns",data:function(){return{campaigns:{},errors:{visible:!1,type:"danger",message:""}}},mounted:function(){this.getCampaigns()},methods:{stripCharacters:function(t){return t.length>70?t.substring(0,70)+"..":t},showDetail:function(t){this.$router.push({name:"campaign",params:{id:t}})},editCampaign:function(t){this.$router.push({name:"edit-campaign",params:{id:t}})},deleteCampaign:function(t){var a=this;this.$http.delete("/campaign/"+t+"/").then((function(){a.getCampaigns()}))},getCampaigns:function(){var t=this;this.$http.get("campaign/").then((function(a){t.campaigns=a.data})).catch((function(){t.errors={visible:!0,type:"danger",message:"Impossible de récupérer la liste des campagnes."}}))}}},kt=wt,$t=Object(m["a"])(kt,xt,yt,!1,null,null,null),jt=$t.exports,At=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-ecommerce"},[e("div",{staticClass:"container-fluid dashboard-content "},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"page-header"},[e("h2",{staticClass:"pageheader-title"},[t._v("Campagnes")]),e("div",{staticClass:"page-breadcrumb"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb d-flex align-items-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/"}},[t._v("Dashboard")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/campaigns"}},[t._v("Campagnes")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" "+t._s(t.campaign.name)+" ")])],1)])])])])]),t.errors.visible?e("Alert",{attrs:{type:t.errors.type,message:t.errors.message},on:{dismiss:function(a){t.errors.visible=!1}}}):t._e(),t.campaign.name?e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-3 col-md-5 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"user-avatar text-center d-block"},[e("img",{staticStyle:{width:"100%","object-fit":"contain"},attrs:{src:t.campaign.logo,alt:t.campaign.name,height:"100"}})]),e("div",{staticClass:"text-center"},[e("h2",{staticClass:"font-24 mb-0"},[t._v(t._s(t.campaign.name))]),e("p",[e("a",{attrs:{href:t.campaign.link}},[t._v(t._s(t.campaign.link))])])]),e("div",{staticClass:"text-center"},[t.campaign.is_archived?e("span",{staticClass:"text-danger"},[t._v("Archivé")]):t._e()])]),e("div",{staticClass:"card-body border-top"},[e("h3",{staticClass:"font-16"},[t._v("Informations de contact")]),e("div",{},[e("ul",{staticClass:"list-unstyled mb-0"},[e("li",{staticClass:"mb-2"},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"wallet"}}),t._v(" Objectif de collecte : "+t._s(t.campaign.goal_amount)+" € ")],1),e("li",{staticClass:"mb-0"},[e("p",[t._v(t._s(t.campaign.description))])])])])])])]),e("div",{staticClass:"col-xl-9 col-lg-9 col-md-7 col-sm-12 col-12"},[e("div",{staticClass:"influence-profile-content pills-regular"},[e("ul",{staticClass:"nav nav-pills mb-3 nav-justified",attrs:{id:"pills-tab",role:"tablist"}},[t._m(0),t._m(1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link text-warning",attrs:{to:"/campaign/"+t.campaign.id+"/edit",id:"pills-review-tab"}},[t._v("Editer")])],1),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link text-danger",attrs:{href:"",id:"pills-review-tab"},on:{click:function(a){return a.preventDefault(),t.deleteCampaign(t.campaign.id)}}},[t._v("Archiver")])])]),e("div",{staticClass:"tab-content",attrs:{id:"pills-tabContent"}},[e("div",{staticClass:"tab-pane fade show active",attrs:{id:"pills-stats",role:"tabpanel","aria-labelledby":"pills-stats-tab"}},[e("div",{staticClass:"row"},[t._m(2),e("div",{staticClass:"col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("span",{staticClass:"d-flex align-items-end mb-1"},[e("h1",{staticClass:"mb-0"},[t._v(" "+t._s(t.campaign.nb_terminals)+" ")]),e("p",{staticClass:"mb-1 ml-1"},[t._v(" termina"),t.campaign.nb_terminals>1?e("span",[t._v("l")]):e("span",[t._v("ux")])])]),e("p",[t._v("Actifs dans")])])])]),e("div",{staticClass:"col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("h1",{staticClass:"mb-1"},[t._v(t._s(t.campaign.collected)+" €")]),e("p",[t._v("Totals dons")])])])]),e("div",{staticClass:"col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[t.campaign.total_today?e("h1",{staticClass:"mb-1"},[t._v(" "+t._s(t.campaign.total_today.toFixed(2))+" € ")]):e("h1",{staticClass:"mb-1"},[t._v("0 €")]),e("p",[t._v("Dons aujourd'hui")])])])]),e("div",{staticClass:"col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[t.campaign.avg_donation?e("h1",{staticClass:"mb-1"},[t._v(" "+t._s(t.campaign.avg_donation.toFixed(2))+" € ")]):e("h1",{staticClass:"mb-1"},[t._v("0 €")]),e("p",[t._v("Don moyen")])])])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[t._m(3),e("div",{staticClass:"card"},[e("h5",{staticClass:"card-header"},[t._v("Dons")]),e("div",{staticClass:"card-body p-0"},[e("div",{staticClass:"dataTables_wrapper dt-bootstrap4"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[t._m(4),e("tbody",t._l(t.displayedPayments,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.id))]),e("td",["Accepted"==a.status?e("span",{staticClass:"text-success"},[t._v(t._s(a.status))]):e("span",{staticClass:"text-danger"},[t._v(t._s(a.status))])]),e("td",[t._v("N° "+t._s(a.donator))]),e("td",[t._v(t._s(a.amount)+" €")]),e("td",[e("router-link",{attrs:{to:"/"}},[e("img",{staticClass:"mr-2 campaign-logo-grayed",attrs:{src:a.game.logo,width:"20",alt:a.game.name}}),t._v(t._s(a.game.name))])],1)])})),0)])]),e("div",{staticClass:"d-flex align-items-center justify-content-between my-2"},[e("div",{staticClass:"col-sm-12 col-md-5"},[e("div",{staticClass:"dataTables_info",attrs:{id:"DataTables_Table_0_info",role:"status","aria-live":"polite"}},[t._v(" Afficher 1 à "+t._s(t.perPage)+" de "+t._s(t.allPayments.length)+" entrées ")])]),e("div",{staticClass:"col-sm-12 col-md-7 d-flex justify-content-end"},[e("nav",{staticClass:"w-100",attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination w-100  d-flex justify-content-end"},[e("li",{staticClass:"page-item"},[1!=t.page?e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.page--}}},[t._v("Previous")]):t._e()]),t._l(t.pages.slice(t.page-1,t.page+5),(function(a){return e("li",{key:a,staticClass:"page-item"},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.page=a}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item"},[t.page<t.pages.length?e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.page++}}},[t._v("Next")]):t._e()])],2)])])])])])])]),e("div",{staticClass:"col-6"},[t._m(5),e("div",{staticClass:"card"},[e("h5",{staticClass:"card-header"},[t._v("Lien YouTube")]),e("div",{staticClass:"card-body p-0"},[e("youtube",{staticClass:"w-100",attrs:{"video-id":t.campaign.video}})],1)])])])]),e("div",{staticClass:"tab-pane fade",attrs:{id:"pills-actions",role:"tabpanel","aria-labelledby":"pills-actions-tab"}},[e("div",{staticClass:"row"},[t._m(6),e("div",{staticClass:"col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("span",{staticClass:"mb-1"},[e("img",{staticClass:"w-100 border",staticStyle:{height:"150px","object-fit":"contain"},attrs:{src:t.campaign.photo1,alt:t.campaign.text1}})]),e("h1",{staticClass:"mt-1 mb-0 text-center"},[t._v("1 €")]),e("p",{staticClass:"mt-1"},[t._v(t._s(t.campaign.text1))])])])]),e("div",{staticClass:"col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("span",[e("img",{staticClass:"w-100 border",staticStyle:{height:"150px","object-fit":"contain"},attrs:{src:t.campaign.photo5,alt:t.campaign.text5}})]),e("h1",{staticClass:"mt-1 mb-0 text-center"},[t._v("5 €")]),e("p",[t._v(t._s(t.campaign.text5))])])])]),e("div",{staticClass:"col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("span",[e("img",{staticClass:"w-100 border",staticStyle:{height:"150px","object-fit":"contain"},attrs:{src:t.campaign.photo10,alt:t.campaign.text10}})]),e("h1",{staticClass:"mt-1 mb-0 text-center"},[t._v("10 €")]),e("p",[t._v(t._s(t.campaign.text10))])])])]),e("div",{staticClass:"col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("span",[e("img",{staticClass:"w-100 border",staticStyle:{height:"150px","object-fit":"contain"},attrs:{src:t.campaign.photo20,alt:t.campaign.text20}})]),e("h1",{staticClass:"mt-1 mb-0 text-center"},[t._v("20 €")]),e("p",[t._v(t._s(t.campaign.text20))])])])]),e("div",{staticClass:"col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("span",[e("img",{staticClass:"w-100 border",staticStyle:{height:"150px","object-fit":"contain"},attrs:{src:t.campaign.photo30,alt:t.campaign.text30}})]),e("h1",{staticClass:"mt-1 mb-0 text-center"},[t._v("30 €")]),e("p",[t._v(t._s(t.campaign.text30))])])])])])])])])])]):t._e()],1)])},Et=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link active",attrs:{id:"pills-stats-tab","data-toggle":"pill",href:"#pills-stats",role:"tab","aria-controls":"pills-stats","aria-selected":"true"}},[t._v("Statistiques")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{id:"pills-actions-tab","data-toggle":"pill",href:"#pills-actions",role:"tab","aria-controls":"pills-actions","aria-selected":"true"}},[t._v("Actions associatives")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"section-block"},[e("h3",{staticClass:"section-title"},[t._v("Statistiques générales")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"section-block"},[e("h3",{staticClass:"section-title"},[t._v("Derniers dons")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"bg-light"},[e("tr",{staticClass:"border-0"},[e("th",{staticClass:"border-0"},[t._v("#")]),e("th",{staticClass:"border-0"},[t._v("Status")]),e("th",{staticClass:"border-0"},[t._v("Donateur")]),e("th",{staticClass:"border-0"},[t._v("Montant")]),e("th",{staticClass:"border-0"},[t._v("Jeu")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"section-block"},[e("h3",{staticClass:"section-title"},[t._v("Vidéo d'association")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"section-block"},[e("h3",{staticClass:"section-title"},[t._v("Actions associatives")])])])}],Tt={name:"ShowTerminal",data:function(){return{campaign:{},errors:{visible:!1,type:"danger",message:""},page:1,perPage:9,pages:[]}},watch:{allPayments:function(){this.setPages()}},computed:{allPayments:function(){return this.campaign.last_donations},displayedPayments:function(){return this.paginate(this.allPayments)}},mounted:function(){this.getCampaign()},methods:{deleteCampaign:function(t){var a=this;this.$http.delete("/campaign/"+t+"/").then((function(){a.$router.push("/campaigns")}))},getCampaign:function(){var t=this;this.$http.get("campaign/"+this.$route.params.id+"/").then((function(a){t.campaign=a.data})).catch((function(t){console.log(t.response)}))},setPages:function(){for(var t=Math.ceil(this.allPayments.length/this.perPage),a=1;a<=t;a++)this.pages.push(a)},paginate:function(t){var a=this.page,e=this.perPage,s=a*e-e,i=a*e;return t.slice(s,i)}}},Pt=Tt,Dt=Object(m["a"])(Pt,At,Et,!1,null,null,null),St=Dt.exports,Nt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-ecommerce"},[e("div",{staticClass:"container-fluid dashboard-content "},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"page-header"},[t._m(0),e("div",{staticClass:"page-breadcrumb"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb d-flex align-items-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/home"}},[t._v("Dashboard")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/campaigns"}},[t._v("Campagnes")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" Ajouter une campagne ")])],1)])])])])]),t.errors.visible?e("Alert",{attrs:{type:t.errors.type,message:t.errors.message},on:{dismiss:function(a){t.errors.visible=!1}}}):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"card"},[t._m(1),e("div",{staticClass:"card-body"},[e("h4",{staticClass:"mb-0"},[t._v("Informations générales")]),e("p",[t._v("Les informations générales de la nouvelle campagne.")]),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-9"},[e("label",{attrs:{for:"name"}},[t._v("Nom de la campagne")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.name,expression:"campaign.name"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.campaign.name},on:{input:function(a){a.target.composing||t.$set(t.campaign,"name",a.target.value)}}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Donnez un nom cohérent à la campagne.")])]),e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"name"}},[t._v("Objectif de collecte")]),e("div",{staticClass:"input-group mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e("font-awesome-icon",{attrs:{icon:"euro-sign"}})],1)]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.goal_amount,expression:"campaign.goal_amount"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.campaign.goal_amount},on:{input:function(a){a.target.composing||t.$set(t.campaign,"goal_amount",a.target.value)}}})])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"name"}},[t._v("Lien vers l'association")]),e("div",{staticClass:"input-group mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e("font-awesome-icon",{attrs:{icon:"link"}})],1)]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.link,expression:"campaign.link"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.campaign.link},on:{input:function(a){a.target.composing||t.$set(t.campaign,"link",a.target.value)}}})])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"description"}},[t._v("Description")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.description,expression:"campaign.description"}],staticClass:"form-control",attrs:{"aria-describedby":"descHelp"},domProps:{value:t.campaign.description},on:{input:function(a){a.target.composing||t.$set(t.campaign,"description",a.target.value)}}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"descHelp"}},[t._v("Une courte description de la mission de l'association.")])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"name"}},[t._v("ID de la vidéo Youtube")]),e("div",{staticClass:"input-group mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e("font-awesome-icon",{attrs:{icon:"video"}})],1)]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.video,expression:"campaign.video"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.campaign.video},on:{input:function(a){a.target.composing||t.$set(t.campaign,"video",a.target.value)}}})])])])])]),e("div",{staticClass:"card-body border-top"},[e("h4",{staticClass:"mb-0"},[t._v("Médias")]),e("p",[t._v(" Il est important de compresser les images au maximum avant de les uploader. ")]),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"logo"}},[t._v("Logo")]),e("input",{ref:"logo",staticClass:"form-control-file",attrs:{type:"file","aria-describedby":"fileHelpId",name:"logo"}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"fileHelpId"}},[t._v("Logo PNG, JPEG ou SVG permettant d'identifier clairement l'association.")])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"actions"}},[t._v("Montants de donations")]),e("div",{staticClass:"d-flex justify-content-between"},[e("div",{staticClass:"col d-flex flex-column align-items-center card py-3 mr-2"},[e("h3",[t._v("1€")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.text1,expression:"campaign.text1"}],ref:"text1",staticClass:"mb-2 w-100",staticStyle:{"font-size":"12px"},attrs:{id:"text1",name:"text1",rows:"4"},domProps:{value:t.campaign.text1},on:{input:function(a){a.target.composing||t.$set(t.campaign,"text1",a.target.value)}}}),e("div",{staticClass:"upload-btn-wrapper"},[e("button",{ref:"text-photo1",staticClass:"btn btn-outline-danger btn-sm"},[t._v(" Ajouter une photo ")]),e("input",{ref:"photo1",attrs:{type:"file",id:"photo1",name:"photo1",required:"required"},on:{change:t.handleFileChange}})])]),e("div",{staticClass:"col d-flex flex-column align-items-center card py-3 mr-2"},[e("h3",[t._v("5€")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.text5,expression:"campaign.text5"}],ref:"action-photo5",staticClass:"mb-2 w-100",staticStyle:{"font-size":"12px"},attrs:{id:"text5",name:"text5",rows:"4"},domProps:{value:t.campaign.text5},on:{input:function(a){a.target.composing||t.$set(t.campaign,"text5",a.target.value)}}}),e("div",{staticClass:"upload-btn-wrapper"},[e("button",{ref:"text-photo5",staticClass:"btn btn-outline-danger btn-sm"},[t._v(" Ajouter une photo ")]),e("input",{ref:"photo5",attrs:{type:"file",id:"photo5",name:"photo5",required:"required"},on:{change:t.handleFileChange}})])]),e("div",{staticClass:"col d-flex flex-column align-items-center card py-3 mr-2"},[e("h3",[t._v("10€")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.text10,expression:"campaign.text10"}],ref:"action-photo10",staticClass:"mb-2 w-100",staticStyle:{"font-size":"12px"},attrs:{id:"text10",name:"text10",rows:"4"},domProps:{value:t.campaign.text10},on:{input:function(a){a.target.composing||t.$set(t.campaign,"text10",a.target.value)}}}),e("div",{staticClass:"upload-btn-wrapper"},[e("button",{ref:"text-photo10",staticClass:"btn btn-outline-danger btn-sm"},[t._v(" Ajouter une photo ")]),e("input",{ref:"photo10",attrs:{type:"file",id:"photo10",name:"photo10",required:"required"},on:{change:t.handleFileChange}})])]),e("div",{staticClass:"col d-flex flex-column align-items-center card py-3 mr-2"},[e("h3",[t._v("20€")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.text20,expression:"campaign.text20"}],ref:"action-photo20",staticClass:"mb-2 w-100",staticStyle:{"font-size":"12px"},attrs:{id:"text20",name:"text20",rows:"4"},domProps:{value:t.campaign.text20},on:{input:function(a){a.target.composing||t.$set(t.campaign,"text20",a.target.value)}}}),e("div",{staticClass:"upload-btn-wrapper"},[e("button",{ref:"text-photo20",staticClass:"btn btn-outline-danger btn-sm"},[t._v(" Ajouter une photo ")]),e("input",{ref:"photo20",attrs:{type:"file",id:"photo20",name:"photo20",required:"required"},on:{change:t.handleFileChange}})])]),e("div",{staticClass:"col d-flex flex-column align-items-center card py-3 mr-2"},[e("h3",[t._v("30€")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.text30,expression:"campaign.text30"}],ref:"action-photo30",staticClass:"mb-2 w-100",staticStyle:{"font-size":"12px"},attrs:{id:"text30",name:"text30",rows:"4"},domProps:{value:t.campaign.text30},on:{input:function(a){a.target.composing||t.$set(t.campaign,"text30",a.target.value)}}}),e("div",{staticClass:"upload-btn-wrapper"},[e("button",{ref:"text-photo30",staticClass:"btn btn-outline-danger btn-sm"},[t._v(" Ajouter une photo ")]),e("input",{ref:"photo30",attrs:{type:"file",id:"photo30",name:"photo30",required:"required"},on:{change:t.handleFileChange}})])])])])])])]),e("div",{staticClass:"card-body text-center"},[e("button",{staticClass:"btn btn-success",on:{click:function(a){return a.preventDefault(),t.addCampaign(a)}}},[t._v(" Enregistrer la campagne ")])])])])])],1)])},Ot=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex justify-content-between"},[e("h2",{staticClass:"pageheader-title"},[t._v("Campagnes")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-header d-flex align-items-center justify-content-between"},[e("h5",{staticClass:"mb-0"},[t._v("Ajouter une campagne")])])}],It=(e("e01a"),e("9911"),{name:"AddCampaign",data:function(){return{campaign:{},errors:{visible:!1,type:"danger",message:""}}},mounted:function(){},methods:{handleFileChange:function(t){this.$refs["text-"+t.target.id].innerText="1 fichier sélectionné",this.$refs["text-"+t.target.id].classList.remove("btn-outline-danger"),this.$refs["text-"+t.target.id].classList.add("btn-success")},addCampaign:function(){var t=this;if(this.campaign){var a=new FormData;a.append("author",this.$store.state.user_id),a.append("name",this.campaign.name),a.append("goal_amount",this.campaign.goal_amount),a.append("link",this.campaign.link),a.append("description",this.campaign.description),a.append("video",this.campaign.video),a.append("logo",this.$refs.logo.files[0]),a.append("photo1",this.$refs.photo1.files[0]),a.append("photo5",this.$refs.photo5.files[0]),a.append("photo10",this.$refs.photo10.files[0]),a.append("photo20",this.$refs.photo20.files[0]),a.append("photo30",this.$refs.photo30.files[0]),a.append("text1",this.campaign.text1),a.append("text5",this.campaign.text5),a.append("text10",this.campaign.text10),a.append("text20",this.campaign.text20),a.append("text30",this.campaign.text30),this.$http.post("campaign/",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){t.campaign=a.data,t.$router.push("/campaigns")})).catch((function(){t.errors={visible:!0,type:"danger",message:"Impossible de créer une nouvelle campagne."}}))}}}}),Lt=It,qt=Object(m["a"])(Lt,Nt,Ot,!1,null,null,null),zt=qt.exports,Gt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-ecommerce"},[e("div",{staticClass:"container-fluid dashboard-content "},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"page-header"},[t._m(0),e("div",{staticClass:"page-breadcrumb"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb d-flex align-items-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/home"}},[t._v("Dashboard")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/campaigns"}},[t._v("Campagnes")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/campaign/"+t.campaign.id}},[t._v(t._s(t.campaign.name))])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" Modifier ")])],1)])])])])]),t.errors.visible?e("Alert",{attrs:{type:t.errors.type,message:t.errors.message},on:{dismiss:function(a){t.errors.visible=!1}}}):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"card"},[t._m(1),e("div",{staticClass:"card-body"},[e("h4",{staticClass:"mb-0"},[t._v("Informations générales")]),e("p",[t._v("Les informations générales de la nouvelle campagne.")]),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-9"},[e("label",{attrs:{for:"name"}},[t._v("Nom de la campagne")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.name,expression:"campaign.name"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.campaign.name},on:{input:function(a){a.target.composing||t.$set(t.campaign,"name",a.target.value)}}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Donnez un nom cohérent à la campagne.")])]),e("div",{staticClass:"form-group col-3"},[e("label",{attrs:{for:"name"}},[t._v("Objectif de collecte")]),e("div",{staticClass:"input-group mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e("font-awesome-icon",{attrs:{icon:"euro-sign"}})],1)]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.goal_amount,expression:"campaign.goal_amount"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.campaign.goal_amount},on:{input:function(a){a.target.composing||t.$set(t.campaign,"goal_amount",a.target.value)}}})])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"name"}},[t._v("Lien vers l'association")]),e("div",{staticClass:"input-group mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e("font-awesome-icon",{attrs:{icon:"link"}})],1)]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.link,expression:"campaign.link"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.campaign.link},on:{input:function(a){a.target.composing||t.$set(t.campaign,"link",a.target.value)}}})])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"description"}},[t._v("Description")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.description,expression:"campaign.description"}],staticClass:"form-control",attrs:{"aria-describedby":"descHelp"},domProps:{value:t.campaign.description},on:{input:function(a){a.target.composing||t.$set(t.campaign,"description",a.target.value)}}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"descHelp"}},[t._v("Une courte description de la mission de l'association.")])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"name"}},[t._v("ID de la vidéo Youtube")]),e("div",{staticClass:"input-group mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e("font-awesome-icon",{attrs:{icon:"video"}})],1)]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.video,expression:"campaign.video"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.campaign.video},on:{input:function(a){a.target.composing||t.$set(t.campaign,"video",a.target.value)}}})])])])]),e("div",{staticClass:"card-body text-center"},[e("button",{staticClass:"btn btn-success",on:{click:function(a){return a.preventDefault(),t.addCampaign(a)}}},[t._v(" Enregistrer la campagne ")])])]),e("div",{staticClass:"card-body border-top"},[e("h4",{staticClass:"mb-0"},[t._v("Médias")]),e("p",[t._v(" Il est important de compresser les images au maximum avant de les uploader. ")]),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"logo"}},[t._v("Logo")]),e("div",[e("img",{staticClass:"rounded border mx-auto my-3 d-block",staticStyle:{"object-fit":"contain"},attrs:{src:t.campaign.logo,width:"200",height:"200"}}),e("div",{staticClass:"upload-btn-wrapper w-100 text-center "},[e("button",{ref:"text-logo",staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"}},[t._v(" Ajouter une photo ")]),e("input",{ref:"logo",attrs:{type:"file",id:"logo",name:"logo",required:"required"},on:{change:t.editLogo}})])])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"actions"}},[t._v("Montants de donations")]),e("div",{staticClass:"d-flex justify-content-between"},[e("div",{staticClass:"col d-flex flex-column align-items-center card py-3 mr-2"},[e("h3",[t._v("1€")]),e("img",{staticClass:"rounded my-3 mx-auto d-block",staticStyle:{"object-fit":"contain"},attrs:{src:t.campaign.photo1,width:"100",height:"100"}}),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.text1,expression:"campaign.text1"}],ref:"text1",staticClass:"mb-2 w-100",staticStyle:{"font-size":"12px"},attrs:{id:"text1",name:"text1",rows:"4"},domProps:{value:t.campaign.text1},on:{input:function(a){a.target.composing||t.$set(t.campaign,"text1",a.target.value)}}}),e("div",{staticClass:"upload-btn-wrapper"},[e("button",{ref:"text-photo1",staticClass:"btn btn-outline-danger btn-sm"},[t._v(" Ajouter une photo ")]),e("input",{ref:"photo1",attrs:{type:"file",id:"photo1",name:"photo1",required:"required"},on:{change:t.handleFileChange}})])]),e("div",{staticClass:"col d-flex flex-column align-items-center card py-3 mr-2"},[e("h3",[t._v("5€")]),e("img",{staticClass:"rounded my-3 mx-auto d-block",staticStyle:{"object-fit":"contain"},attrs:{src:t.campaign.photo5,width:"100",height:"100"}}),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.text5,expression:"campaign.text5"}],ref:"action-photo5",staticClass:"mb-2 w-100",staticStyle:{"font-size":"12px"},attrs:{id:"text5",name:"text5",rows:"4"},domProps:{value:t.campaign.text5},on:{input:function(a){a.target.composing||t.$set(t.campaign,"text5",a.target.value)}}}),e("div",{staticClass:"upload-btn-wrapper"},[e("button",{ref:"text-photo5",staticClass:"btn btn-outline-danger btn-sm"},[t._v(" Ajouter une photo ")]),e("input",{ref:"photo5",attrs:{type:"file",id:"photo5",name:"photo5",required:"required"},on:{change:t.handleFileChange}})])]),e("div",{staticClass:"col d-flex flex-column align-items-center card py-3 mr-2"},[e("h3",[t._v("10€")]),e("img",{staticClass:"rounded my-3 mx-auto d-block",staticStyle:{"object-fit":"contain"},attrs:{src:t.campaign.photo10,width:"100",height:"100"}}),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.text10,expression:"campaign.text10"}],ref:"action-photo10",staticClass:"mb-2 w-100",staticStyle:{"font-size":"12px"},attrs:{id:"text10",name:"text10",rows:"4"},domProps:{value:t.campaign.text10},on:{input:function(a){a.target.composing||t.$set(t.campaign,"text10",a.target.value)}}}),e("div",{staticClass:"upload-btn-wrapper"},[e("button",{ref:"text-photo10",staticClass:"btn btn-outline-danger btn-sm"},[t._v(" Ajouter une photo ")]),e("input",{ref:"photo10",attrs:{type:"file",id:"photo10",name:"photo10",required:"required"},on:{change:t.handleFileChange}})])]),e("div",{staticClass:"col d-flex flex-column align-items-center card py-3 mr-2"},[e("h3",[t._v("20€")]),e("img",{staticClass:"rounded my-3 mx-auto d-block",staticStyle:{"object-fit":"contain"},attrs:{src:t.campaign.photo20,width:"100",height:"100"}}),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.text20,expression:"campaign.text20"}],ref:"action-photo20",staticClass:"mb-2 w-100",staticStyle:{"font-size":"12px"},attrs:{id:"text20",name:"text20",rows:"4"},domProps:{value:t.campaign.text20},on:{input:function(a){a.target.composing||t.$set(t.campaign,"text20",a.target.value)}}}),e("div",{staticClass:"upload-btn-wrapper"},[e("button",{ref:"text-photo20",staticClass:"btn btn-outline-danger btn-sm"},[t._v(" Ajouter une photo ")]),e("input",{ref:"photo20",attrs:{type:"file",id:"photo20",name:"photo20",required:"required"},on:{change:t.handleFileChange}})])]),e("div",{staticClass:"col d-flex flex-column align-items-center card py-3 mr-2"},[e("h3",[t._v("30€")]),e("img",{staticClass:"rounded my-3 mx-auto d-block",staticStyle:{"object-fit":"contain"},attrs:{src:t.campaign.photo30,width:"100",height:"100"}}),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.text30,expression:"campaign.text30"}],ref:"action-photo30",staticClass:"mb-2 w-100",staticStyle:{"font-size":"12px"},attrs:{id:"text30",name:"text30",rows:"4"},domProps:{value:t.campaign.text30},on:{input:function(a){a.target.composing||t.$set(t.campaign,"text30",a.target.value)}}}),e("div",{staticClass:"upload-btn-wrapper"},[e("button",{ref:"text-photo30",staticClass:"btn btn-outline-danger btn-sm"},[t._v(" Ajouter une photo ")]),e("input",{ref:"photo30",attrs:{type:"file",id:"photo30",name:"photo30",required:"required"},on:{change:t.handleFileChange}})])])])])])])])])])])],1)])},Ft=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex justify-content-between"},[e("h2",{staticClass:"pageheader-title"},[t._v("Campagnes")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-header d-flex align-items-center justify-content-between"},[e("h5",{staticClass:"mb-0"},[t._v("Modifier une campagne")])])}],Ut={name:"EditCampaign",data:function(){return{campaign:{},errors:{visible:!1,type:"danger",message:""}}},mounted:function(){this.getCampaign()},methods:{getCampaign:function(){var t=this;this.$http.get("campaign/"+this.$route.params.id+"/").then((function(a){t.campaign=a.data})).catch((function(t){console.log(t.response)}))},handleFileChange:function(t){var a=this;this.$refs["text-"+t.target.id].innerText="Enregistrement...",this.$refs["text-"+t.target.id].classList.remove("btn-outline-warning"),this.$refs["text-"+t.target.id].classList.add("btn-success");var e=new FormData;e.append(t.target.id,this.$refs[t.target.id].files[0]),e.append(this.$refs["action-"+t.target.id].id,this.$refs["action-"+t.target.id].value),this.$http.patch("campaign/"+this.campaign.id+"/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a.campaign=e.data,a.$refs["text-"+t.target.id].classList.remove("btn-success"),a.$refs["text-"+t.target.id].classList.add("btn-outline-warning"),a.$refs["text-"+t.target.id].innerText="Modifier la photo"})).catch((function(t){console.log(t.response)}))},editLogo:function(t){var a=this;this.$refs["text-"+t.target.id].innerText="Enregistrement...",this.$refs["text-"+t.target.id].classList.remove("btn-outline-danger"),this.$refs["text-"+t.target.id].classList.add("btn-success");var e=new FormData;e.append("logo",this.$refs.logo.files[0]),this.$http.patch("campaign/"+this.campaign.id+"/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a.campaign=e.data,a.$refs["text-"+t.target.id].innerText="Enregistré"})).catch((function(t){console.log(t.response)}))},edit:function(){var t=this;if(this.campaign){var a=new FormData;a.append("author",this.$store.state.user_id),a.append("name",this.campaign.name),a.append("goal_amount",this.campaign.goal_amount),a.append("link",this.campaign.link),a.append("description",this.campaign.description),a.append("video",this.campaign.video),a.append("html_template",this.campaign.html_template),this.$http.patch("campaign/"+this.campaign.id+"/",a).then((function(a){t.campaign=a.data})).catch((function(t){console.log(t.response)}))}}}},Ht=Ut,Mt=Object(m["a"])(Ht,Gt,Ft,!1,null,null,null),Jt=Mt.exports,Vt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-ecommerce"},[e("div",{staticClass:"container-fluid dashboard-content "},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"page-header"},[e("div",{staticClass:"d-flex justify-content-between"},[e("h2",{staticClass:"pageheader-title"},[t._v("Jeux")]),e("router-link",{staticClass:"btn btn-primary mb-1",attrs:{to:{name:"addGame"}}},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"plus"}}),t._v("Ajouter un jeu")],1)],1),e("div",{staticClass:"page-breadcrumb"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb d-flex align-items-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/home"}},[t._v("Dashboard")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/games"}},[t._v("Jeux")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" Tous les jeux ")])],1)])])])])]),t.errors.visible?e("Alert",{attrs:{type:t.errors.type,message:t.errors.message},on:{dismiss:function(a){t.errors.visible=!1}}}):t._e(),e("div",{staticClass:"ecommerce-widget"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("h5",{staticClass:"card-header"},[t._v("Jeux")]),e("div",{staticClass:"card-body p-0"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.games,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.id))]),e("td",[e("span",{staticClass:"text-success"},[e("img",{attrs:{src:a.logo,height:"30",alt:a.name}})])]),e("td",[t._v(" "+t._s(a.name)+" ")]),e("td",[t._v(t._s(t.stripCharacters(a.description)))]),a.total_donations?e("td",[t._v(" "+t._s(a.total_donations)+" € ")]):e("td",[t._v("0 €")]),e("td",[t._v(" "+t._s(a.nb_terminals)+" termina"),a.nb_terminals>1?e("span",[t._v("ux")]):e("span",[t._v("l")])]),e("td",[e("router-link",{staticClass:"text-primary",attrs:{to:"/game/"+a.id+"/edit"}},[e("font-awesome-icon",{attrs:{icon:"pen"}})],1)],1),e("td",[e("a",{staticClass:"text-danger",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.deleteGame(a.id)}}},[e("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1)])])})),0)])])])])])])])],1)])},Rt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"bg-light"},[e("tr",{staticClass:"border-0"},[e("th",{staticClass:"border-0"},[t._v("#")]),e("th",{staticClass:"border-0"},[t._v("Logo")]),e("th",{staticClass:"border-0"},[t._v("Nom")]),e("th",{staticClass:"border-0"},[t._v("Description")]),e("th",{staticClass:"border-0"},[t._v("Dons collectés")]),e("th",{staticClass:"border-0"},[t._v("Terminaux associés")]),e("th",{staticClass:"border-0"}),e("th",{staticClass:"border-0"})])])}],Bt={name:"AllGames",data:function(){return{games:{},errors:{visible:!1,type:"danger",message:""}}},mounted:function(){this.getGames()},methods:{stripCharacters:function(t){return t.length>70?t.substring(0,70)+"..":t},showDetail:function(t){this.$router.push({name:"game",params:{id:t}})},editGame:function(t){this.$router.push("/game/"+t+"/edit")},deleteGame:function(t){var a=this;this.$http.delete("/game/"+t+"/").then((function(){a.getGames()}))},getGames:function(){var t=this;this.$http.get("game/").then((function(a){t.games=a.data}))}}},Wt=Bt,Kt=Object(m["a"])(Wt,Vt,Rt,!1,null,null,null),Yt=Kt.exports,Qt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-ecommerce"},[e("div",{staticClass:"container-fluid dashboard-content "},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"page-header"},[t._m(0),e("div",{staticClass:"page-breadcrumb"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb d-flex align-items-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/home"}},[t._v("Dashboard")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/games"}},[t._v("Jeux")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" Ajouter un jeu ")])],1)])])])])]),t.errors.visible?e("Alert",{attrs:{type:t.errors.type,message:t.errors.message},on:{dismiss:function(a){t.errors.visible=!1}}}):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"card"},[t._m(1),e("div",{staticClass:"card-body"},[e("h4",{staticClass:"mb-0"},[t._v("Informations générales")]),e("p",[t._v("Les informations générales sur le nouveau jeu.")]),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"name"}},[t._v("Nom du jeu")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.game.name,expression:"game.name"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.game.name},on:{input:function(a){a.target.composing||t.$set(t.game,"name",a.target.value)}}})]),e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"name"}},[t._v("Chemin du fichier (rom)")]),e("div",{staticClass:"input-group mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e("font-awesome-icon",{attrs:{icon:"file"}})],1)]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.game.path,expression:"game.path"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.game.path},on:{input:function(a){a.target.composing||t.$set(t.game,"path",a.target.value)}}})])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"description"}},[t._v("Description")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.game.description,expression:"game.description"}],staticClass:"form-control",attrs:{"aria-describedby":"descHelp"},domProps:{value:t.game.description},on:{input:function(a){a.target.composing||t.$set(t.game,"description",a.target.value)}}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"descHelp"}},[t._v("Une courte description du jeu.")])])])])]),e("div",{staticClass:"card-body border-top"},[e("h4",{staticClass:"mb-0"},[t._v("Médias")]),e("p",[t._v(" Il est important de compresser les images au maximum avant de les uploader. ")]),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"logo"}},[t._v("Logo")]),e("input",{ref:"logo",staticClass:"form-control-file",attrs:{type:"file","aria-describedby":"fileHelpId",name:"logo"}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"fileHelpId"}},[t._v("Logo PNG, JPEG ou SVG permettant d'identifier clairement l'association.")])])])])]),e("div",{staticClass:"card-body text-center"},[e("button",{staticClass:"btn btn-success",on:{click:function(a){return a.preventDefault(),t.addGame(a)}}},[t._v(" Enregistrer le jeu ")])])])])])],1)])},Xt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex justify-content-between"},[e("h2",{staticClass:"pageheader-title"},[t._v("Jeux")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-header d-flex align-items-center justify-content-between"},[e("h5",{staticClass:"mb-0"},[t._v("Ajouter un jeu")])])}],Zt={name:"AddGame",data:function(){return{game:{},errors:{visible:!1,type:"danger",message:""}}},mounted:function(){},methods:{handleFileChange:function(t){this.$refs["text-"+t.target.id].innerText="1 fichier sélectionné",this.$refs["text-"+t.target.id].classList.remove("btn-outline-danger"),this.$refs["text-"+t.target.id].classList.add("btn-success")},addGame:function(){var t=this;if(this.game){var a=new FormData;a.append("name",this.game.name),a.append("path",this.game.path),a.append("description",this.game.description),a.append("logo",this.$refs.logo.files[0]),this.$http.post("game/",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){t.game=a.data,t.$router.push("/games")})).catch((function(){t.errors={visible:!0,type:"danger",message:"Impossible de créer un nouveau jeu."}}))}}}},ta=Zt,aa=Object(m["a"])(ta,Qt,Xt,!1,null,null,null),ea=aa.exports,sa=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-ecommerce"},[e("div",{staticClass:"container-fluid dashboard-content "},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"page-header"},[t._m(0),e("div",{staticClass:"page-breadcrumb"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb d-flex align-items-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/home"}},[t._v("Dashboard")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/games"}},[t._v("Jeux")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item",attrs:{"aria-current":"page"}},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/games"}},[t._v(t._s(t.game.name))])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" Modifier ")])],1)])])])])]),t.errors.visible?e("Alert",{attrs:{type:t.errors.type,message:t.errors.message},on:{dismiss:function(a){t.errors.visible=!1}}}):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"card"},[t._m(1),e("div",{staticClass:"card-body"},[e("h4",{staticClass:"mb-0"},[t._v("Informations générales")]),e("p",[t._v("Les informations générales sur le jeu.")]),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"name"}},[t._v("Nom du jeu")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.game.name,expression:"game.name"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.game.name},on:{input:function(a){a.target.composing||t.$set(t.game,"name",a.target.value)}}})]),e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"name"}},[t._v("Chemin du fichier (rom)")]),e("div",{staticClass:"input-group mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e("font-awesome-icon",{attrs:{icon:"file"}})],1)]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.game.path,expression:"game.path"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.game.path},on:{input:function(a){a.target.composing||t.$set(t.game,"path",a.target.value)}}})])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"description"}},[t._v("Description")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.game.description,expression:"game.description"}],staticClass:"form-control",attrs:{"aria-describedby":"descHelp"},domProps:{value:t.game.description},on:{input:function(a){a.target.composing||t.$set(t.game,"description",a.target.value)}}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"descHelp"}},[t._v("Une courte description du jeu.")])])])])]),e("div",{staticClass:"card-body text-center"},[e("button",{staticClass:"btn btn-success",on:{click:function(a){return a.preventDefault(),t.edit(a)}}},[t._v(" Enregistrer les modifications ")])]),e("div",{staticClass:"card-body border-top"},[e("h4",{staticClass:"mb-0"},[t._v("Médias")]),e("p",[t._v(" Il est important de compresser les images au maximum avant de les uploader. ")]),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{attrs:{for:"logo"}},[t._v("Logo")]),e("div",[e("img",{staticClass:"rounded border mx-auto my-3 d-block",staticStyle:{"object-fit":"contain"},attrs:{src:t.game.logo,width:"200",height:"200"}}),e("div",{staticClass:"upload-btn-wrapper w-100 text-center "},[e("button",{ref:"text-logo",staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"}},[t._v(" Ajouter une photo ")]),e("input",{ref:"logo",attrs:{type:"file",id:"logo",name:"logo",required:"required"},on:{change:t.editLogo}})])])])])])])])])])],1)])},ia=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex justify-content-between"},[e("h2",{staticClass:"pageheader-title"},[t._v("Jeux")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-header d-flex align-items-center justify-content-between"},[e("h5",{staticClass:"mb-0"},[t._v("Modifier un jeu")])])}],ra={name:"EditGame",data:function(){return{game:{},errors:{visible:!1,type:"danger",message:""}}},mounted:function(){this.getGame()},methods:{getGame:function(){var t=this;this.$http.get("game/"+this.$route.params.id+"/").then((function(a){t.game=a.data}))},editLogo:function(t){var a=this;if(this.game){this.$refs["text-"+t.target.id].innerText="Enregistrement...",this.$refs["text-"+t.target.id].classList.remove("btn-outline-danger"),this.$refs["text-"+t.target.id].classList.add("btn-success");var e=new FormData;e.append("logo",this.$refs.logo.files[0]),this.$http.patch("game/"+this.$route.params.id+"/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){a.game=t.data,a.$router.push("/games")}))}},edit:function(){var t=this;if(this.game){var a=new FormData;a.append("name",this.game.name),a.append("path",this.game.path),a.append("description",this.game.description),this.$http.patch("game/"+this.$route.params.id+"/",a).then((function(a){t.game=a.data,t.$router.push("/games")}))}}}},na=ra,oa=Object(m["a"])(na,sa,ia,!1,null,null,null),la=oa.exports,ca=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-ecommerce"},[e("div",{staticClass:"container-fluid dashboard-content "},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"page-header"},[e("div",{staticClass:"d-flex justify-content-between"},[e("h2",{staticClass:"pageheader-title"},[t._v("Clients")]),e("router-link",{staticClass:"btn btn-primary mb-1",attrs:{to:{name:"addClient"}}},[e("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"plus"}}),t._v("Ajouter un client")],1)],1),e("div",{staticClass:"page-breadcrumb"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb d-flex align-items-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/home"}},[t._v("Dashboard")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/clients"}},[t._v("Clients")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" Tous les clients ")])],1)])])])])]),t.errors.visible?e("Alert",{attrs:{type:t.errors.type,message:t.errors.message},on:{dismiss:function(a){t.errors.visible=!1}}}):t._e(),e("div",{staticClass:"ecommerce-widget"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("h5",{staticClass:"card-header"},[t._v("Clients")]),e("div",{staticClass:"card-body p-0"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.customers,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.id))]),a.is_active?e("td",[e("span",{staticClass:"text-success"},[t._v("Activé")])]):e("td",[e("span",{staticClass:"text-danger"},[t._v("Désactivé")])]),e("td",[t._v(" "+t._s(a.company)+" ")]),e("td",[t._v(t._s(a.representative))]),"A"==a.sales_type?e("td",[t._v(" Achat ")]):e("td",[t._v("Location")]),1==a.maintenance_type?e("td",[t._v(" Option 1 ")]):e("td",[t._v("Option 2")]),e("td",[e("a",{staticClass:"text-primary",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.editClient(a.id)}}},[e("font-awesome-icon",{attrs:{icon:"pen"}})],1)]),e("td",[e("a",{staticClass:"text-danger",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.deleteGame(a.id)}}},[e("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1)])])})),0)])])])])])])])],1)])},ma=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"bg-light"},[e("tr",{staticClass:"border-0"},[e("th",{staticClass:"border-0"},[t._v("#")]),e("th",{staticClass:"border-0"},[t._v("Status")]),e("th",{staticClass:"border-0"},[t._v("Entreprise")]),e("th",{staticClass:"border-0"},[t._v("Contact")]),e("th",{staticClass:"border-0"},[t._v("Type de contrat")]),e("th",{staticClass:"border-0"},[t._v("Type de maintenance")]),e("th",{staticClass:"border-0"}),e("th",{staticClass:"border-0"})])])}],da={name:"AllClients",data:function(){return{customers:{},errors:{visible:!1,type:"danger",message:""}}},mounted:function(){this.getClients()},methods:{stripCharacters:function(t){return t.length>70?t.substring(0,70)+"..":t},editClient:function(t){this.$router.push("/client/"+t+"/edit")},deleteClient:function(t){var a=this;this.$http.delete("/customer/"+t+"/").then((function(){a.getClients()}))},getClients:function(){var t=this;this.$http.get("customer/").then((function(a){t.customers=a.data}))}}},ua=da,pa=Object(m["a"])(ua,ca,ma,!1,null,null,null),va=pa.exports,ga=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-ecommerce"},[e("div",{staticClass:"container-fluid dashboard-content "},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"page-header"},[t._m(0),e("div",{staticClass:"page-breadcrumb"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb d-flex align-items-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/home"}},[t._v("Dashboard")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/clients"}},[t._v("Clients")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" Ajouter un client ")])],1)])])])])]),t.errors.visible?e("Alert",{attrs:{type:t.errors.type,message:t.errors.message},on:{dismiss:function(a){t.errors.visible=!1}}}):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"card"},[t._m(1),e("div",{staticClass:"card-body"},[e("h4",{staticClass:"mb-0"},[t._v("Nouveau client")]),e("p",[t._v("Le compte lié au nouveau terminal.")]),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{staticClass:"col-form-label",attrs:{for:"company"}},[t._v("Nom de l'entreprise")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.company,expression:"customer.company"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.customer.company},on:{input:function(a){a.target.composing||t.$set(t.customer,"company",a.target.value)}}})]),e("div",{staticClass:"form-group col"},[e("label",{staticClass:"col-form-label",attrs:{for:"inputEmail"}},[t._v("Contact au sein de l'entreprise")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.representative,expression:"customer.representative"}],staticClass:"form-control",attrs:{type:"email",placeholder:"name@example.com"},domProps:{value:t.customer.representative},on:{input:function(a){a.target.composing||t.$set(t.customer,"representative",a.target.value)}}})])]),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-md-6 col-12"},[e("label",{attrs:{for:"sales_type"}},[t._v("Type de vente")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.customer.sales_type,expression:"customer.sales_type"}],staticClass:"custom-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.customer,"sales_type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"A"}},[t._v("Achat")]),e("option",{attrs:{value:"L"}},[t._v("Location")])])]),e("div",{staticClass:"form-group col-md-6 col-12"},[e("label",{attrs:{for:"sales_type"}},[t._v("Contrat de maintenance")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.customer.maintenance_type,expression:"customer.maintenance_type"}],staticClass:"custom-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.customer,"maintenance_type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"option1"}},[t._v("Option 1")]),e("option",{attrs:{value:"option2"}},[t._v("Option 2")])])])])])]),e("div",{staticClass:"card-body text-center"},[e("button",{staticClass:"btn btn-success",on:{click:function(a){return a.preventDefault(),t.addClient(a)}}},[t._v(" Ajouter le client ")])])])])])],1)])},ha=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex justify-content-between"},[e("h2",{staticClass:"pageheader-title"},[t._v("Clients")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-header d-flex align-items-center justify-content-between"},[e("h5",{staticClass:"mb-0"},[t._v("Ajouter un client")])])}],fa={name:"AddClient",data:function(){return{customer:{},errors:{visible:!1,type:"danger",message:""}}},mounted:function(){},methods:{addClient:function(){var t=this;this.$http.post("customer/",this.customer).then((function(){t.$router.push("/clients")})).catch((function(){t.errors={visible:!0,type:"danger",message:"Erreur dans l'enregistrement du client."}}))}}},ba=fa,Ca=Object(m["a"])(ba,ga,ha,!1,null,null,null),_a=Ca.exports,xa=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-ecommerce"},[e("div",{staticClass:"container-fluid dashboard-content "},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"page-header"},[t._m(0),e("div",{staticClass:"page-breadcrumb"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb d-flex align-items-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/home"}},[t._v("Dashboard")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/terminals"}},[t._v("Terminaux")])],1),e("font-awesome-icon",{staticClass:"mx-1",attrs:{icon:"angle-right",size:"xs"}}),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" Ajouter un terminal ")])],1)])])])])]),t.errors.visible?e("Alert",{attrs:{type:t.errors.type,message:t.errors.message},on:{dismiss:function(a){t.errors.visible=!1}}}):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{staticClass:"card"},[t._m(1),t.customer.company?e("div",{staticClass:"card-body"},[e("h4",{staticClass:"mb-0"},[t._v("Nouveau client")]),e("p",[t._v("Le compte lié au nouveau terminal.")]),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col"},[e("label",{staticClass:"col-form-label",attrs:{for:"company"}},[t._v("Nom de l'entreprise")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.company,expression:"customer.company"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.customer.company},on:{input:function(a){a.target.composing||t.$set(t.customer,"company",a.target.value)}}})]),e("div",{staticClass:"form-group col"},[e("label",{staticClass:"col-form-label",attrs:{for:"inputEmail"}},[t._v("Contact au sein de l'entreprise")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.representative,expression:"customer.representative"}],staticClass:"form-control",attrs:{type:"email",placeholder:"name@example.com"},domProps:{value:t.customer.representative},on:{input:function(a){a.target.composing||t.$set(t.customer,"representative",a.target.value)}}})])]),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-md-6 col-12"},[e("label",{attrs:{for:"sales_type"}},[t._v("Type de vente")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.customer.sales_type,expression:"customer.sales_type"}],staticClass:"custom-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.customer,"sales_type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"A"},domProps:{selected:"A"==t.customer.sales_type}},[t._v("Achat")]),e("option",{attrs:{value:"L"},domProps:{selected:"L"==t.customer.sales_type}},[t._v("Location")])])]),e("div",{staticClass:"form-group col-md-6 col-12"},[e("label",{attrs:{for:"sales_type"}},[t._v("Contrat de maintenance")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.customer.maintenance_type,expression:"customer.maintenance_type"}],staticClass:"custom-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.customer,"maintenance_type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"option1"},domProps:{selected:"option1"==t.customer.maintenance_type}},[t._v("Option 1")]),e("option",{attrs:{value:"option2"},domProps:{selected:"option2"==t.customer.maintenance_type}},[t._v("Option 2")])])])])])]):t._e(),e("div",{staticClass:"card-body text-center"},[e("button",{staticClass:"btn btn-success",on:{click:function(a){return a.preventDefault(),t.editClient(a)}}},[t._v(" Modifier le client ")])])])])])],1)])},ya=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex justify-content-between"},[e("h2",{staticClass:"pageheader-title"},[t._v("Terminaux")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-header d-flex align-items-center justify-content-between"},[e("h5",{staticClass:"mb-0"},[t._v("Modifier un client")])])}],wa={name:"EditClient",data:function(){return{customer:{},errors:{visible:!1,type:"danger",message:""}}},mounted:function(){this.getCustomer()},methods:{getCustomer:function(){var t=this;this.$http.get("customer/"+this.$route.params.id+"/").then((function(a){t.customer=a.data}))},editClient:function(){var t=this;this.$http.put("customer/"+this.customer.id+"/",this.customer).then((function(){t.$router.push("/clients")})).catch((function(){t.errors={visible:!0,type:"danger",message:"Erreur dans l'enregistrement du client."}}))}}},ka=wa,$a=Object(m["a"])(ka,xa,ya,!1,null,null,null),ja=$a.exports;s["a"].use(q["a"]);var Aa=[{path:"/",name:"home",component:B},{path:"/terminals",name:"terminals",component:Z,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/terminals/:id",name:"terminal",component:rt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/terminal/add",name:"addTerminal",component:dt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/terminal/:id/edit",name:"editTerminal",component:_t,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/campaigns",name:"campaigns",component:jt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/campaigns/:id",name:"campaign",component:St,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/campaign/add",name:"addCampaign",component:zt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/campaign/:id/edit",name:"editCampaign",component:Jt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/games",name:"games",component:Yt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/game/add",name:"addGame",component:ea,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/game/:id/edit",name:"editGame",component:la,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/clients",name:"clients",component:va,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/client/add",name:"addClient",component:_a,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/client/:id/edit",name:"editClient",component:ja,meta:{requiresAuth:!0,requiresAdmin:!0}}],Ea=new q["a"]({mode:"history",base:"/",routes:Aa,scrollBehavior:function(t,a,e){return{x:0,y:0}}});Ea.beforeEach((function(t,a,e){if(t.matched.some((function(t){return t.meta.onlyFrom}))){if(a.name==t.meta.onlyFrom)return void e();e("/start")}else if(t.matched.some((function(t){return t.meta.requiresAdmin}))){if(U.getters.isAdmin)return void e();e("/")}else if(t.matched.some((function(t){return t.meta.requiresAuth}))){if(U.getters.isLoggedIn)return void e();e("/login")}else if(t.matched.some((function(t){return t.meta.requiresAnon}))){if(!U.getters.isLoggedIn)return void e();e("/")}else e()}));var Ta=Ea,Pa={login:function(t,a){return F.a.post("/auth/token/",{username:t,password:a})},getUserInfo:function(){return F.a.get("/auth/self/")},refreshToken:function(){return F.a.post("/auth/token/refresh/",{refresh:localStorage.getItem("refreshToken")})}},Da={createAxiosResponseInterceptor:function(){F.a.interceptors.response.use((function(t){return t}),(function(t){return 401!==t.response.status?new Promise((function(a,e){e(t)})):"/auth/token/"==t.config.url?new Promise((function(a,e){e(t)})):"/auth/token/refresh/"==t.config.url?(U.dispatch("logout").then((function(){Vue.toasted.global.success({message:"Veuillez vous reconnecter."})})),delete F.a.defaults.headers.common["Authorization"],Ta.push("/login"),new Promise((function(a,e){e(t)}))):Pa.refreshToken().then((function(a){var e=t.config;return U.dispatch("auth/refreshAccessToken",a.data),e.headers["Authorization"]="Bearer "+a.data.access,new Promise((function(t,a){F.a.request(e).then((function(a){t(a)})).catch((function(t){a(t)}))}))}))}))}},Sa=(e("4989"),e("ab8b"),e("a65d")),Na=e.n(Sa),Oa=e("26b9"),Ia=e.n(Oa),La=e("e0ec"),qa=e.n(La),za=e("4a7a"),Ga=e.n(za),Fa=(e("6dfc"),e("f206")),Ua=e.n(Fa),Ha=e("ecee"),Ma=e("c074"),Ja=e("ad3d"),Va=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:["alert","alert-"+t.type,"alert-dismissible","fade","show"],attrs:{role:"alert"}},["success"==t.type?e("strong",[t._v("Succès :")]):e("strong",[t._v("Erreur :")]),t._v(" "+t._s(t.message)+" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:t.dismiss}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},Ra=[],Ba={name:"Alert",props:["type","message"],methods:{dismiss:function(){this.$emit("dismiss")}}},Wa=Ba,Ka=Object(m["a"])(Wa,Va,Ra,!1,null,null,null),Ya=Ka.exports;e("c0a0"),e("dabe"),e("bb15"),e("bd17"),e("fc12"),e("03cf"),e("0700"),Ha["c"].add(Ma["y"],Ma["p"],Ma["u"],Ma["r"],Ma["e"],Ma["m"],Ma["i"],Ma["q"],Ma["z"],Ma["d"],Ma["f"],Ma["s"],Ma["t"],Ma["x"],Ma["k"],Ma["l"],Ma["g"],Ma["A"],Ma["a"],Ma["c"],Ma["b"],Ma["j"],Ma["v"],Ma["h"],Ma["o"],Ma["w"],Ma["n"]),s["a"].component("font-awesome-icon",Ja["a"]),s["a"].component("Alert",Ya),s["a"].use(qa.a),s["a"].use(Ia.a,{color:"rgb(91, 184, 93)",failedColor:"red",height:"3px"}),s["a"].config.productionTip=!1;var Qa="https://puls-preprod.herokuapp.com/";F.a.defaults.baseURL=Qa,s["a"].prototype.$http=F.a;var Xa=localStorage.getItem("accessToken");Xa&&(s["a"].prototype.$http.defaults.headers.common["Authorization"]="Bearer ".concat(Xa)),Da.createAxiosResponseInterceptor(),s["a"].use(Na.a,{position:"bottom-center",duration:6e3,keepOnHover:!0,iconPack:"fontawesome"}),s["a"].use(Na.a,{position:"bottom-right",duration:6e3,keepOnHover:!0,iconPack:"fontawesome"}),s["a"].toasted.register("error",(function(t){return t.message?t.message:"Oops.. Something Went Wrong.."}),{type:"error"}),s["a"].toasted.register("success",(function(t){return t.message?t.message:"OK."}),{type:"success"}),s["a"].use(Ia.a,{color:"#17b978",failedColor:"#874b4b",thickness:"2px"}),s["a"].use(S.a,{color:"#FEC531",backgroundColor:"#000000",opacity:.3},{}),s["a"].component("v-select",Ga.a),s["a"].use(Ua.a),new s["a"]({mode:"history",router:Ta,store:U,render:function(t){return t(L)}}).$mount("#app")},"7ca3":function(t,a,e){t.exports=e.p+"img/arcade.8b326747.svg"},"91a9":function(t,a,e){"use strict";var s=e("bb0d"),i=e.n(s);i.a},bb0d:function(t,a,e){},bb15:function(t,a,e){},bd17:function(t,a,e){},c0a0:function(t,a,e){},dabe:function(t,a,e){},fc12:function(t,a,e){}});
//# sourceMappingURL=app.b56ec83e.js.map